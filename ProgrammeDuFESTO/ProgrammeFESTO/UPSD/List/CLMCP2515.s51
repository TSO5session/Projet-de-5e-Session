///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V8.10.1.40194/W32 for 8051        24/Nov/2014  22:54:30 /
// Copyright 2004-2011 IAR Systems AB.                                        /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  near                                              /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data                                              /
//    Dptr setup         =  1,16                                              /
//    Source file        =  C:\Synchro\Dropbox\Travaux\Automne                /
//                          2014\ProjetSession5\ProgrammeDuFESTO\ProgrammeFES /
//                          TO\CLMCP2515.cpp                                  /
//    Command line       =  "C:\Synchro\Dropbox\Travaux\Automne               /
//                          2014\ProjetSession5\ProgrammeDuFESTO\ProgrammeFES /
//                          TO\CLMCP2515.cpp" -D UPSD3254A --preprocess=cl    /
//                          "C:\Synchro\Dropbox\Travaux\Automne               /
//                          2014\ProjetSession5\ProgrammeDuFESTO\ProgrammeFES /
//                          TO\UPSD\List\" -lC "C:\Synchro\Dropbox\Travaux\Au /
//                          tomne 2014\ProjetSession5\ProgrammeDuFESTO\Progra /
//                          mmeFESTO\UPSD\List\" -lA                          /
//                          "C:\Synchro\Dropbox\Travaux\Automne               /
//                          2014\ProjetSession5\ProgrammeDuFESTO\ProgrammeFES /
//                          TO\UPSD\List\" -o "C:\Synchro\Dropbox\Travaux\Aut /
//                          omne 2014\ProjetSession5\ProgrammeDuFESTO\Program /
//                          meFESTO\UPSD\Obj\" -e --no_cse --no_unroll        /
//                          --no_inline --no_code_motion --no_tbaa --debug    /
//                          --core=plain --dptr=16,1 --data_model=large       /
//                          --code_model=near --calling_convention=xdata_reen /
//                          trant --place_constants=data --nr_virtual_regs 8  /
//                          --dlib_config "C:\Program Files (x86)\IAR         /
//                          Systems\Embedded Workbench                        /
//                          6.0\8051\LIB\DLIB\dl8051Normal.h" -Ol --eec++     /
//    List file          =  C:\Synchro\Dropbox\Travaux\Automne                /
//                          2014\ProjetSession5\ProgrammeDuFESTO\ProgrammeFES /
//                          TO\UPSD\List\CLMCP2515.s51                        /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME CLMCP2515

        RTMODEL "__SystemLibrary", "DLib"
        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "near"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        ERROR
//NOTE: This module defines or uses C++ features that are not
//      accessible from assembler code. Assembling this file will
//      not produce an equivalent object file to the one produced
//      by the C++ compiler.

        EXTERN ?ALLOC_XSTACK8
        EXTERN ?DEALLOC_XSTACK8
        EXTERN ?FUNC_ENTER_XDATA
        EXTERN ?FUNC_LEAVE_XDATA
        EXTERN ?L_ADD_X
        EXTERN ?L_MOV_X
        EXTERN ?MOVE_LONG8_XDATA_XDATA
        EXTERN ?PUSH_XSTACK8_X_FOUR
        EXTERN ?PUSH_XSTACK_I_ONE
        EXTERN ?SS_SHR
        EXTERN ?UL_GT
        EXTERN ?V0
        EXTERN ?XSP
        EXTERN ?XSTACK_DISP0_8
        EXTERN __INIT_XDATA_I
        EXTERN __INIT_XDATA_Z

        PUBLIC ??AcquitterInterruptionsMCP2515
        FUNCTION ??AcquitterInterruptionsMCP2515,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC ??CLMCP2515
        FUNCTION ??CLMCP2515,021203H
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 8, STACK
        PUBLIC ??ChoisirIdentifiantTX0
        FUNCTION ??ChoisirIdentifiantTX0,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ??Delai
        FUNCTION ??Delai,0203H
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 15, STACK
        PUBLIC ??EcrireDonnesMCP2515
        FUNCTION ??EcrireDonnesMCP2515,021203H
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 16, STACK
        PUBLIC ??EcrireRegistreMCP2515
        FUNCTION ??EcrireRegistreMCP2515,021203H
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ??EnvoyerTrameMCP2515
        FUNCTION ??EnvoyerTrameMCP2515,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        PUBLIC ??InitialisationMCP2515
        FUNCTION ??InitialisationMCP2515,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        PUBLIC ??LireDonnesMCP2515
        FUNCTION ??LireDonnesMCP2515,021203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 16, STACK
        PUBLIC ??LireRegistreMCP2515
        FUNCTION ??LireRegistreMCP2515,021203H
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ??Longueur
        FUNCTION ??Longueur,0203H
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ??Read
        FUNCTION ??Read,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 15, STACK
        PUBLIC `??delete ~CLMCP2515`
        FUNCTION `??delete ~CLMCP2515`,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        PUBLIC `??new CLMCP2515`
        FUNCTION `??new CLMCP2515`,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC `?~CLMCP2515`
        FUNCTION `?~CLMCP2515`,021203H
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUBWEAK _A_P1
        PUBWEAK __Constant_0
        PUBWEAK __Constant_1
        PUBWEAK __Constant_3e8
        PUBWEAK __Constant_a
        
        CFI Names cfiNames0
        CFI StackFrame CFA_SP SP IDATA
        CFI StackFrame CFA_PSP16 PSP16 XDATA
        CFI StackFrame CFA_XSP16 XSP16 XDATA
        CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
        CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
        CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
        CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
        CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
        CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
        CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
        CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
        CFI Resource SP:8, PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
        CFI VirtualResource ?RET:16, ?RET_HIGH:8, ?RET_LOW:8
        CFI ResourceParts PSP16 PSPH, PSPL
        CFI ResourceParts XSP16 XSPH, XSPL
        CFI ResourceParts ?RET ?RET_HIGH, ?RET_LOW
        CFI EndNames cfiNames0
        
        CFI Common cfiCommon0 Using cfiNames0
        CFI CodeAlign 1
        CFI DataAlign -1
        CFI ReturnAddress ?RET CODE
        CFI CFA_DOVERLAY Used
        CFI CFA_IOVERLAY Used
        CFI CFA_SP SP+-2
        CFI CFA_PSP16 PSP16+0
        CFI CFA_XSP16 XSP16+0
        CFI `PSW.CY` SameValue
        CFI `B.BR0` SameValue
        CFI `B.BR1` SameValue
        CFI `B.BR2` SameValue
        CFI `B.BR3` SameValue
        CFI `B.BR4` SameValue
        CFI `B.BR5` SameValue
        CFI `B.BR6` SameValue
        CFI `B.BR7` SameValue
        CFI `VB.BR8` SameValue
        CFI `VB.BR9` SameValue
        CFI `VB.BR10` SameValue
        CFI `VB.BR11` SameValue
        CFI `VB.BR12` SameValue
        CFI `VB.BR13` SameValue
        CFI `VB.BR14` SameValue
        CFI `VB.BR15` SameValue
        CFI VB SameValue
        CFI B Undefined
        CFI A Undefined
        CFI PSW SameValue
        CFI DPL0 SameValue
        CFI DPH0 SameValue
        CFI R0 Undefined
        CFI R1 Undefined
        CFI R2 Undefined
        CFI R3 Undefined
        CFI R4 Undefined
        CFI R5 Undefined
        CFI R6 SameValue
        CFI R7 SameValue
        CFI V0 SameValue
        CFI V1 SameValue
        CFI V2 SameValue
        CFI V3 SameValue
        CFI V4 SameValue
        CFI V5 SameValue
        CFI V6 SameValue
        CFI V7 SameValue
        CFI PSPH Undefined
        CFI PSPL Undefined
        CFI XSPH Undefined
        CFI XSPL Undefined
        CFI ?RET Concat
        CFI ?RET_HIGH Frame(CFA_SP, 2)
        CFI ?RET_LOW Frame(CFA_SP, 1)
        CFI EndCommon cfiCommon0
        
        EXTERN `??operator new`
        FUNCTION `??operator new`,010202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN `??operator delete`
        FUNCTION `??operator delete`,010202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ??CLSPI
        FUNCTION ??CLSPI,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN `?~CLSPI`
        FUNCTION `?~CLSPI`,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ??Write
        FUNCTION ??Write,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC

// C:\Synchro\Dropbox\Travaux\Automne 2014\ProjetSession5\ProgrammeDuFESTO\ProgrammeFESTO\CLMCP2515.cpp
//    1 // ***************** FICHIER:CLI2CPort.cpp
//    2 //
//    3 //  Description:Contient les fonctions haut niveau pour communiquer avec 
//    4 //              l I2C.
//    5 //             
//    6 //
//    7 //  Application realisee avec IAR
//    8 //
//    9 //  AUTEUR : Gabriel Fortin-Belanger
//   10 //  DATE CREATION :    2014-02-07       VERSION: 1.0
//   11 //  DATE MODIFICATION: ****-**-**
//   12 //
//   13 //******************************************************************************
//   14 #include "_DeclarationGenerale.h"

        ASEGN SFR_AN:DATA:NOROOT,090H
// union <unnamed> volatile __sfr _A_P1
_A_P1:
        DATA8
        DS 1

        RSEG NEAR_CODE:CODE:NOROOT(0)
// __near_func __xdata_reentrant CLMCP2515 &CLMCP2515::new CLMCP2515()
`??new CLMCP2515`:
        CFI Block cfiBlock0 Using cfiCommon0
        CFI Function `??new CLMCP2515`
        CODE
        FUNCALL `??new CLMCP2515`, `??operator new`
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL `??new CLMCP2515`, ??CLMCP2515
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    ?V0 + 0
        CFI V0 Frame(CFA_SP, 3)
        CFI CFA_SP SP+-3
        PUSH    ?V0 + 1
        CFI V1 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        ; Saved register size: 2
        ; Auto size: 0
        ; Setup parameters for call to function operator new(unsigned int)
        MOV     R2,#0x9
        MOV     R3,#0x0
        LCALL   `??operator new`
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        MOV     A,R0
        MOV     R2,A
        MOV     A,R1
        MOV     R3,A
        MOV     A,R0
        ORL     A,R1
        JZ      `??new CLMCP2515_1`
        ; Setup parameters for call to function CLMCP2515::CLMCP2515()
        LCALL   ??CLMCP2515
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        SJMP    `??new CLMCP2515_2`
`??new CLMCP2515_1`:
        MOV     R2,#0x0
        MOV     R3,#0x0
`??new CLMCP2515_2`:
        POP     ?V0 + 1
        CFI V1 SameValue
        CFI CFA_SP SP+-3
        POP     ?V0 + 0
        CFI V0 SameValue
        CFI CFA_SP SP+-2
        RET
        CFI EndBlock cfiBlock0

        RSEG NEAR_CODE:CODE:NOROOT(0)
// __near_func __xdata_reentrant void CLMCP2515::delete ~CLMCP2515(CLMCP2515 *)
`??delete ~CLMCP2515`:
        CFI Block cfiBlock1 Using cfiCommon0
        CFI Function `??delete ~CLMCP2515`
        CODE
        FUNCALL `??delete ~CLMCP2515`, `?~CLMCP2515`
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL `??delete ~CLMCP2515`, `??operator delete`
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x8
        LCALL   ?FUNC_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 8)
        ; Saved register size: 8
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        MOV     A,R6
        ORL     A,R7
        JZ      `??delete ~CLMCP2515_1`
        ; Setup parameters for call to function CLMCP2515::~CLMCP2515()
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   `?~CLMCP2515`
        ; Setup parameters for call to function operator delete(void *)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   `??operator delete`
`??delete ~CLMCP2515_1`:
        MOV     R7,#0x1
        LJMP    ?FUNC_LEAVE_XDATA
        CFI EndBlock cfiBlock1
//   15 #include "CLMCP2515.h"
//   16 #include "CLSPI.h"
//   17 
//   18 //******************************************************************************
//   19 //                            LE CONSTRUCTEUR PAR DEFAUT
//   20 // *****************************************************************************

        RSEG NEAR_CODE:CODE:NOROOT(0)
//   21 CLMCP2515 :: CLMCP2515(void)
??CLMCP2515:
        CFI Block cfiBlock2 Using cfiCommon0
        CFI Function ??CLMCP2515
        CODE
        FUNCALL ??CLMCP2515, ??CLSPI
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x8
        LCALL   ?FUNC_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 8)
        ; Saved register size: 8
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//   22 {
        ; Setup parameters for call to function CLSPI::CLSPI()
        MOV     A,R6
        ADD     A,#0x8
        MOV     R2,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     R3,A
        LCALL   ??CLSPI
//   23  
//   24 }
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        MOV     R7,#0x1
        LJMP    ?FUNC_LEAVE_XDATA
        CFI EndBlock cfiBlock2
//   25 
//   26 
//   27 // *****************************************************************************
//   28 //                            LE DESTRUCTEUR
//   29 // *****************************************************************************

        RSEG NEAR_CODE:CODE:NOROOT(0)
//   30 CLMCP2515 :: ~CLMCP2515(void)
`?~CLMCP2515`:
        CFI Block cfiBlock3 Using cfiCommon0
        CFI Function `?~CLMCP2515`
        CODE
//   31 {
        FUNCALL `?~CLMCP2515`, `?~CLSPI`
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        ; Saved register size: 0
        ; Auto size: 0
//   32 
//   33 }
        ; Setup parameters for call to function CLSPI::~CLSPI()
        MOV     A,R2
        ADD     A,#0x8
        MOV     R2,A
        MOV     A,R3
        ADDC    A,#0x0
        MOV     R3,A
        LJMP    `?~CLSPI`
        CFI EndBlock cfiBlock3
//   34 
//   35 

        RSEG NEAR_CODE:CODE:NOROOT(0)
//   36 void CLMCP2515 :: InitialisationMCP2515(void)
??InitialisationMCP2515:
        CFI Block cfiBlock4 Using cfiCommon0
        CFI Function ??InitialisationMCP2515
        CODE
//   37 {
        FUNCALL ??InitialisationMCP2515, ??EcrireDonnesMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??Delai
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??InitialisationMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x8
        LCALL   ?FUNC_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 8)
        ; Saved register size: 8
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//   38    /* Envoi de la commande de « RESET », qui consiste en l'envoi de l'octet « 0xC0 », par le bus SPI. */
//   39    EcrireDonnesMCP2515(1, MCP2515_RESET, 0x00, 0x00);
        ; Setup parameters for call to function CLMCP2515::EcrireDonnesMCP2515(UC, UC, UC, UC)
        MOV     ?V0 + 0,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 9)
        MOV     R5,#0x0
        MOV     R4,#-0x40
        MOV     R1,#0x1
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireDonnesMCP2515
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 8)
        MOV     A,R1
//   40    
//   41    Delai(1000);   /* Délai permettant de s'assurer que le cicruit « MCP2515 » soit bien réinitialisé. */
        ; Setup parameters for call to function CLMCP2515::Delai(unsigned long)
        MOV     DPTR,#__Constant_3e8
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 12)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??Delai
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 8)
//   42 
//   43 
//   44 
//   45 /* Passage du circuit MCP2515 en « Configuration mode », nécéssaire pour pouvoir effectuer les opérations de configurations qui suivent */
//   46 
//   47    EcrireRegistreMCP2515(MCP2515_CANCTRL, 0x87);   /* Registre 0x0F.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#-0x79
        MOV     R1,#0xf
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//   48                              - REQOP2 = 1,
//   49                              - REQOP1 = 0,
//   50                              - REQOP0 = 0 : le circuit est passé en « Configuration mode »,
//   51                              - ABAT = 0 : ne pas annuler toutes les transmissons en attentes, si nécéssaire,
//   52                              - OSM : renvois des messages, si nécessaire,
//   53                              - CLKEN = 1 : la broche « CLKOUT » est activée,
//   54                              - CLKPRE1 = 1,
//   55                              - CLKPRE0 = 1 : réglage du prédiviseur de l'horloge de la broche « CLKOUT » à 8,
//   56                              - F_CLKOUT = System Clock / 8 */
//   57 
//   58    EcrireRegistreMCP2515(MCP2515_TX01_INT, 0x3C); /* Registre 0x0C */
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x3c
        MOV     R1,#0xc
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//   59    EcrireRegistreMCP2515(MCP2515_TXRTSCTRL, 0x00); /* Registre 0x0D.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x0
        MOV     R1,#0xd
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//   60                            L'envoi d'un message - RTS - ne se fait pas sur le passage à « 0 » d'une broche,
//   61                            mais après l'envoi de la commande « RTS », par l'intermédiaire du bus SPI */
//   62 
//   63 
//   64 /* Initialisations des registres des compteurs d'erreurs */
//   65 
//   66    EcrireRegistreMCP2515(MCP2515_TEC, 0x00); /* Registre 0x1C.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x0
        MOV     R1,#0x1c
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//   67                          Mise à zéro du compteur d'erreurs en émission.*/
//   68    EcrireRegistreMCP2515(MCP2515_REC, 0x00); /* Registre 0x1D.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x0
        MOV     R1,#0x1d
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//   69                          Mise à zéro du compteur d'erreurs en réception.*/
//   70 
//   71 
//   72    
//   73 /* Configurations du « Bit Timing » */
//   74                      
//   75    EcrireRegistreMCP2515(MCP2515_CNF1, 0xC0 ); /* Registre 0x2A.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#-0x40
        MOV     R1,#0x2a
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//   76                             - SJW = 0 : 1 x TQ,
//   77                             - BRP = 3. */
//   78    EcrireRegistreMCP2515(MCP2515_CNF2, 0x88); /* Registre 0x29.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#-0x78
        MOV     R1,#0x29
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//   79                             - BTLMODE = 1,
//   80                             - SAM = 0,
//   81                             - PHSEG1 = 2,
//   82                             - PRSEG = 0. */
//   83    EcrireRegistreMCP2515(MCP2515_CNF3, 0x03 ); /* Registre 0x28.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x3
        MOV     R1,#0x28
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//   84                             - SOF = 0 : Broche « CLKOUT » activée pour la fonction de répétition de l'horloge,
//   85                             - WAKFIL = 0 : Wake-up filter désactivé,
//   86                             - PHSEG : 2. */
//   87 
//   88 /* Configurations des interruptions du circuit MCP2515 */
//   89 
//   90    EcrireRegistreMCP2515(MCP2515_CANINTE, 0x01); /* Registre 0x2B.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x1
        MOV     R1,#0x2b
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//   91                             Autorisation des interruptions suite à la réception d'une donnée par le module « RXB0 ». */
//   92 
//   93    EcrireRegistreMCP2515(MCP2515_CANINTF, 0x00); /* Registre 0x2C.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x0
        MOV     R1,#0x2c
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//   94                              Acquittement des éventuelles interruptions qui seraient en attente .*/
//   95    
//   96    EcrireRegistreMCP2515(MCP2515_EFLG, 0x00); /* Registre 0x2D */
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x0
        MOV     R1,#0x2d
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//   97 
//   98    EcrireRegistreMCP2515(MCP2515_RXB0CTRL, 0x20); /* Registre 0x60 */
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x20
        MOV     R1,#0x60
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//   99    
//  100    
//  101 
//  102 /* Configuration initiale du module « TXB0 » */
//  103 
//  104    EcrireRegistreMCP2515(MCP2515_TXB0CTRL, 0x03); /* Registre 0x30.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x3
        MOV     R1,#0x30
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//  105                               TXP = 0b11 : les messages ont la plus haute priorité. */
//  106 
//  107    EcrireRegistreMCP2515(MCP2515_TXB0DLC, 0x01); /* Registre 0x35.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x1
        MOV     R1,#0x35
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//  108                              Nombre d'octets occupés par les données à envoyer : 1 octet.*/
//  109 
//  110 
//  111                             
//  112 /* Configurations de l'identifiant en réception par le filtre 0 du circuit MCP2515 */
//  113       
//  114    EcrireRegistreMCP2515(MCP2515_RXF0SIDH, 0x00);   /* Registre 0x00.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x0
        MOV     R1,#0x0
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//  115                               Identifiant initial de réception H. */
//  116 
//  117    EcrireRegistreMCP2515(MCP2515_RXF0SIDL, 0xC0);   /* Registre 0x01.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#-0x40
        MOV     R1,#0x1
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//  118                               Identifiant initial de réception L + configurations initiales du mode de fonctionnement des identifiants en réceptions. */
//  119 
//  120 
//  121 
//  122 /* Configurations du masque de réception initial utilisé par le filtre 0 du circuit MCP2515 */
//  123 
//  124    EcrireRegistreMCP2515(MCP2515_RXM0SIDH, 0x00);   /* Registre 0x20.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x0
        MOV     R1,#0x20
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//  125                               Masque de réception initial H. */
//  126                               
//  127    EcrireRegistreMCP2515(MCP2515_RXM0SIDL, 0xE0);   /* Registre 0x21.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#-0x20
        MOV     R1,#0x21
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//  128                               Masque de réception initial L. + configurations initiales du mode de fonctionnement des masque de réceptions. */
//  129 
//  130 
//  131 
//  132 
//  133 /* Configurations de l'identifiant en émission par le module « TXB0 » du circuit MCP2515 */
//  134 
//  135    EcrireRegistreMCP2515(MCP2515_TXB0SIDH, 0x00);   /* Registre 0x31.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x0
        MOV     R1,#0x31
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//  136                               Identifiant initial d'émission H. */
//  137 
//  138    EcrireRegistreMCP2515(MCP2515_TXB0SIDL, 0x00);   /* Registre 0x32.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x0
        MOV     R1,#0x32
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//  139                               Identifiant initial d'émission L + configurations initiales du mode de fonctionnement des identifiants en émissions. */
//  140 
//  141    
//  142 /* Passage du circuit MCP2515 en « Normal Operation mode » */
//  143    EcrireRegistreMCP2515(MCP2515_CANCTRL, 0x07); /* Registre 0x0F
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x7
        MOV     R1,#0xf
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//  144    //EcrireRegistreMCP2515(MCP2515_CANCTRL, 0x07); * Registre 0x0F.
//  145                               - REQOP2 = 1,
//  146                               - REQOP1 = 0,
//  147                               - REQOP0 = 0 : le circuit est passé en « Normal Operation mode ». 
//  148                               - Les réglages précédemment évoqués restent inchangés. */
//  149 
//  150 }
        MOV     R7,#0x1
        LJMP    ?FUNC_LEAVE_XDATA
        CFI EndBlock cfiBlock4
//  151 
//  152 
//  153 
//  154 

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  155 void CLMCP2515 :: EcrireRegistreMCP2515(unsigned char Address, unsigned char Data)
??EcrireRegistreMCP2515:
        CFI Block cfiBlock5 Using cfiCommon0
        CFI Function ??EcrireRegistreMCP2515
        CODE
//  156 {
        FUNCALL ??EcrireRegistreMCP2515, ??EcrireDonnesMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x8
        LCALL   ?FUNC_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 8)
        ; Saved register size: 8
        ; Auto size: 0
        MOV     A,R1
        MOV     R7,A
        MOV     A,R4
        MOV     R6,A
//  157    EcrireDonnesMCP2515(3, MCP2515_WRITE, Address, Data);   /* Envoi de 3 octets :
        ; Setup parameters for call to function CLMCP2515::EcrireDonnesMCP2515(UC, UC, UC, UC)
        MOV     ?V0 + 0,A
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 9)
        MOV     A,R7
        MOV     R5,A
        MOV     R4,#0x2
        MOV     R1,#0x3
        LCALL   ??EcrireDonnesMCP2515
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 8)
        MOV     A,R1
//  158                                        - La commande d'écriture ;
//  159                                        - L'adresse du registre dans lequel écrire ;
//  160                                        - L'octet à écrire dans le registre. */
//  161 }
        MOV     R7,#0x1
        LJMP    ?FUNC_LEAVE_XDATA
        CFI EndBlock cfiBlock5
//  162 
//  163 

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  164 UC CLMCP2515 :: LireRegistreMCP2515(unsigned char Address)
??LireRegistreMCP2515:
        CFI Block cfiBlock6 Using cfiCommon0
        CFI Function ??LireRegistreMCP2515
        CODE
//  165 {
        FUNCALL ??LireRegistreMCP2515, ??LireDonnesMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x8
        LCALL   ?FUNC_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 8)
        ; Saved register size: 8
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
//  166  // EcrireDonnesMCP2515(3, MCP2515_READ, Address, 0xFF);
//  167   return(LireDonnesMCP2515(3, MCP2515_READ, Address, 0xFF));   /* Envoi de 3 octets :
        ; Setup parameters for call to function CLMCP2515::LireDonnesMCP2515(unsigned char, unsigned char, unsigned char, unsigned char)
        MOV     ?V0 + 0,#-0x1
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 9)
        MOV     A,R6
        MOV     R5,A
        MOV     R4,#0x3
        MOV     R1,#0x3
        LCALL   ??LireDonnesMCP2515
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 8)
        MOV     R7,#0x1
        LJMP    ?FUNC_LEAVE_XDATA
        CFI EndBlock cfiBlock6
//  168                                         //- La commande d'écriture ;
//  169                                        - L'adresse du registre dans lequel écrire                                       - L'octet à écrire dans le registre. */
//  170 }
//  171 
//  172 
//  173 
//  174 /* Configuration de l'identifiant d'envoi utilisé par le module « TXB0 ».
//  175 
//  176 
//  177 Paramètres d'entrée :
//  178 
//  179 int identifiant - Identifiant, sur 11 bits, que doit utiliser le module « TXB0 ».
//  180 
//  181 Valeur de retour :
//  182 
//  183 Aucune.
//  184 */

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  185 void CLMCP2515 :: ChoisirIdentifiantTX0(int Identifiant)
??ChoisirIdentifiantTX0:
        CFI Block cfiBlock7 Using cfiCommon0
        CFI Function ??ChoisirIdentifiantTX0
        CODE
//  186 {
        FUNCALL ??ChoisirIdentifiantTX0, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??ChoisirIdentifiantTX0, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?FUNC_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     DPL,R2
        MOV     DPH,R3
        MOV     A,R4
        MOV     R2,A
        MOV     A,R5
        MOV     R3,A
//  187    UC Contenu_MCP2515_TXB0SIDH = 0;
        MOV     R4,#0x0
//  188    UC Contenu_MCP2515_TXB0SIDL = 0;
        MOV     R6,#0x0
//  189 
//  190    Contenu_MCP2515_TXB0SIDH = (UC)(0x00FF & (Identifiant >> 3));   /* On récupère les 8 bits de poids fort de l'identifiant à configurer,
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,#0x3
        MOV     R0,#?V0 + 0
        LCALL   ?SS_SHR
        MOV     A,?V0 + 0
        MOV     R4,?V0 + 0
//  191 qui doivent être placés tels quels dans le registre « MCP2515_TXB0SIDH ». */
//  192 
//  193    Contenu_MCP2515_TXB0SIDL = (UC)(0x00E0 & (Identifiant << 5));   /* On récupère les 3 bits de poids faible de l'identifiant à configurer,
        MOV     A,R2
        SWAP    A
        RLC     A
        ANL     A,#0xe0
        MOV     R6,A
//  194 qui doivent être placés dans le registre « MCP2515_TXB0SIDL »,
//  195 aux bits « MCP2515_TXB0SIDL<5> », « MCP2515_TXB0SIDL<6> » et « MCP2515_TXB0SIDL<7> ». */
//  196 
//  197    EcrireRegistreMCP2515(MCP2515_TXB0SIDH, Contenu_MCP2515_TXB0SIDH);   /* Identifiant Emission H */
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R1,#0x31
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??EcrireRegistreMCP2515
//  198    EcrireRegistreMCP2515(MCP2515_TXB0SIDL, Contenu_MCP2515_TXB0SIDL);   /* Identifiant Emission L + Configurations du mode de fonctionnement des identifiants */
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     A,R6
        MOV     R4,A
        MOV     R1,#0x32
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??EcrireRegistreMCP2515
//  199 }
        MOV     R7,#0x2
        LJMP    ?FUNC_LEAVE_XDATA
        CFI EndBlock cfiBlock7
//  200 
//  201 
//  202 
//  203 
//  204 
//  205 /* Envoi d'un message d'un maximum de 8 caractères, par le module « TXB0 ».
//  206 
//  207 
//  208 Paramètres d'entrée :
//  209 
//  210 unsigned char * message - Pointeur sur le début d'une chaîne d'un maximum de 8 caractères,
//  211 à tranmettre par le module « TXB0 ».
//  212 
//  213 Valeur de retour :
//  214 
//  215 Aucune.
//  216 */

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  217 void CLMCP2515 :: EnvoyerTrameMCP2515(const  unsigned char * Message)
??EnvoyerTrameMCP2515:
        CFI Block cfiBlock8 Using cfiCommon0
        CFI Function ??EnvoyerTrameMCP2515
        CODE
//  218 {
        FUNCALL ??EnvoyerTrameMCP2515, ??Longueur
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??EnvoyerTrameMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??EnvoyerTrameMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??EnvoyerTrameMCP2515, ??EcrireDonnesMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??EnvoyerTrameMCP2515, ??Delai
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xf
        LCALL   ?FUNC_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 15)
        ; Saved register size: 15
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        MOV     ?V0 + 6,R4
        MOV     ?V0 + 7,R5
//  219    UC TailleDuMessage = 0;
        MOV     ?V0 + 0,#0x0
//  220    UC k;
//  221    UC PointeurRegistre = MCP2515_TXB0D0;
        MOV     ?V0 + 4,#0x36
//  222 
//  223    /* Détermination du nombre d'octets de données à transmettre, et limitation à 8 octets au maximum. */
//  224    TailleDuMessage = Longueur(Message);
        ; Setup parameters for call to function CLMCP2515::Longueur(unsigned char const *)
        MOV     R4,?V0 + 6
        MOV     R5,?V0 + 7
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??Longueur
        MOV     A,R1
        MOV     ?V0 + 0,A
//  225 
//  226    if(TailleDuMessage > 8)   /* Si le nombre d'octets de données à transmettre dépasse le nombre maximal d'octets possible. */
        MOV     A,?V0 + 0
        CLR     C
        SUBB    A,#0x9
        JC      ??EnvoyerTrameMCP2515_1
//  227    {
//  228       TailleDuMessage = 8;   /* Le nombre maximal d'octets possible sera tranmis par le circuit MCP2515. */
        MOV     ?V0 + 0,#0x8
//  229    }
//  230 
//  231    EcrireRegistreMCP2515(MCP2515_TXB0DLC, TailleDuMessage);   /* Le MCP2515 est informé du nombre d'octets de données qu'il aura à tranmettre. */
??EnvoyerTrameMCP2515_1:
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,?V0 + 0
        MOV     R1,#0x35
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//  232 
//  233    /* Chargement du message dans le MCP2515 */
//  234    for(k = 0; k < TailleDuMessage; k++)
        MOV     ?V0 + 1,#0x0
        SJMP    ??EnvoyerTrameMCP2515_2
//  235    {
//  236       EcrireRegistreMCP2515(PointeurRegistre, Message[k]);   /* Les registres de données du module « TXB0 »,
??EnvoyerTrameMCP2515_3:
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     ?V0 + 2,?V0 + 1
        MOV     ?V0 + 3,#0x0
        MOV     A,?V0 + 6
        ADD     A,?V0 + 2
        MOV     DPL,A
        MOV     A,?V0 + 7
        ADDC    A,?V0 + 3
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R4,A
        MOV     R1,?V0 + 4
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireRegistreMCP2515
//  237 dont les adresses sont consécutives, sont remplis,
//  238 en commencant par le registre « MCP2515_TXB0D0 », d'adresse 0x36. */
//  239       PointeurRegistre++;
        INC     ?V0 + 4
//  240    }
        INC     ?V0 + 1
??EnvoyerTrameMCP2515_2:
        MOV     A,?V0 + 1
        CLR     C
        SUBB    A,?V0 + 0
        JC      ??EnvoyerTrameMCP2515_3
//  241 
//  242    /* Envoi de la commande « RTS », qui consiste en l'envoi de l'octet « 0xC0 », par le bus SPI. */
//  243    EcrireDonnesMCP2515(1, MCP2515_RTS_TX0, 0x00, 0x00);
        ; Setup parameters for call to function CLMCP2515::EcrireDonnesMCP2515(UC, UC, UC, UC)
        MOV     ?V0 + 0,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 16)
        MOV     R5,#0x0
        MOV     R4,#-0x7f
        MOV     R1,#0x1
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??EcrireDonnesMCP2515
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 15)
        MOV     A,R1
//  244 
//  245    Delai(10);
        ; Setup parameters for call to function CLMCP2515::Delai(unsigned long)
        MOV     DPTR,#__Constant_a
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 19)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??Delai
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 15)
//  246 }
        MOV     R7,#0x8
        LJMP    ?FUNC_LEAVE_XDATA
        CFI EndBlock cfiBlock8
//  247 
//  248 
//  249 
//  250 
//  251 

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  252 UC*  CLMCP2515 :: Read(void)
??Read:
        CFI Block cfiBlock9 Using cfiCommon0
        CFI Function ??Read
        CODE
//  253 {
        FUNCALL ??Read, ??LireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??Read, ??LireRegistreMCP2515
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??Read, ??Delai
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xb
        LCALL   ?FUNC_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 11)
        ; Saved register size: 11
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//  254  UC ucTrame; 
//  255  ucTrame  = LireRegistreMCP2515(MCP2515_RXB0DLC);
        ; Setup parameters for call to function CLMCP2515::LireRegistreMCP2515(unsigned char)
        MOV     R1,#0x65
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??LireRegistreMCP2515
        MOV     A,R1
        MOV     ?V0 + 3,A
//  256  ucBuf[0] = ucTrame;
        MOV     A,?V0 + 3
        MOV     DPL,R6
        MOV     DPH,R7
        MOV     A,?V0 + 3
        MOVX    @DPTR,A
//  257     
//  258  for(UC uci = 0; uci < ucTrame; uci++)
        MOV     ?V0 + 2,#0x0
        SJMP    ??Read_1
//  259    {
//  260     ucBuf[uci + 1] = LireRegistreMCP2515( MCP2515_RXB0D0 + uci);
??Read_2:
        ; Setup parameters for call to function CLMCP2515::LireRegistreMCP2515(unsigned char)
        MOV     A,#0x66
        ADD     A,?V0 + 2
        MOV     R1,A
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??LireRegistreMCP2515
        MOV     A,R1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     ?V0 + 0,?V0 + 2
        MOV     ?V0 + 1,#0x0
        MOV     A,R6
        ADD     A,?V0 + 0
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,?V0 + 1
        MOV     DPH,A
        INC     DPTR
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  261     Delai(1000);
        ; Setup parameters for call to function CLMCP2515::Delai(unsigned long)
        MOV     DPTR,#__Constant_3e8
        LCALL   ?PUSH_XSTACK8_X_FOUR
        CFI CFA_XSP16 add(XSP16, 15)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??Delai
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 11)
//  262    }
        INC     ?V0 + 2
??Read_1:
        MOV     A,?V0 + 2
        CLR     C
        SUBB    A,?V0 + 3
        JC      ??Read_2
//  263   return(ucBuf);
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        MOV     R7,#0x4
        LJMP    ?FUNC_LEAVE_XDATA
        CFI EndBlock cfiBlock9
//  264 }
//  265 

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  266 void CLMCP2515 :: AcquitterInterruptionsMCP2515(void)
??AcquitterInterruptionsMCP2515:
        CFI Block cfiBlock10 Using cfiCommon0
        CFI Function ??AcquitterInterruptionsMCP2515
        CODE
//  267 {
        FUNCALL ??AcquitterInterruptionsMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??AcquitterInterruptionsMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??AcquitterInterruptionsMCP2515, ??EcrireRegistreMCP2515
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 3)
        CFI CFA_SP SP+-3
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        ; Saved register size: 2
        ; Auto size: 0
        MOV     DPL,R2
        MOV     DPH,R3
//  268    EcrireRegistreMCP2515(MCP2515_CANCTRL, 0x87);   /* Registe 0x0F.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#-0x79
        MOV     R1,#0xf
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??EcrireRegistreMCP2515
//  269                               Le circuit est passé en « Configuration mode ». */
//  270    EcrireRegistreMCP2515(MCP2515_CANINTF, 0x00);   /* Registre 0x2C.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x0
        MOV     R1,#0x2c
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??EcrireRegistreMCP2515
//  271                               Acquittement des interruptions du circuit MCP2515. */
//  272    EcrireRegistreMCP2515(MCP2515_CANCTRL, 0x07);   /* Registe 0x0F.
        ; Setup parameters for call to function CLMCP2515::EcrireRegistreMCP2515(unsigned char, unsigned char)
        MOV     R4,#0x7
        MOV     R1,#0xf
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??EcrireRegistreMCP2515
//  273                               Le circuit est passé en « Normal Operation mode ». */
//  274 }
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-3
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-2
        RET
        CFI EndBlock cfiBlock10
//  275 
//  276 

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  277 UC CLMCP2515 :: EcrireDonnesMCP2515(UC NombreDonneesEnvoyer, UC Donnee1, UC Donnee2, UC Donnee3)
??EcrireDonnesMCP2515:
        CFI Block cfiBlock11 Using cfiCommon0
        CFI Function ??EcrireDonnesMCP2515
        CODE
//  278 {
        FUNCALL ??EcrireDonnesMCP2515, ??Write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xd
        LCALL   ?FUNC_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 13)
        ; Saved register size: 13
        ; Auto size: 3
        MOV     A,#-0x3
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 16)
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 0,R1
        MOV     A,R4
        MOV     R6,A
        MOV     A,R5
        MOV     R7,A
        MOV     A,#0x10
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
//  279    UC k;
//  280    UC Donnees[3] = {0x00};
        MOV     DPTR,#`?<Constant {(UC)'\\000'}>`
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     A,#0x3
        LCALL   ?MOVE_LONG8_XDATA_XDATA
//  281 
//  282    Donnees[0] = Donnee1;
        MOV     A,R6
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    @DPTR,A
//  283    Donnees[1] = Donnee2;
        MOV     A,R7
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  284    Donnees[2] = Donnee3;
        MOV     A,R0
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  285 
//  286    CS = 0;  
        CLR     0x90.7
//  287 
//  288    for(k = 0; k < NombreDonneesEnvoyer; k++)
        MOV     ?V0 + 1,#0x0
        SJMP    ??EcrireDonnesMCP2515_1
//  289    {
//  290     SPI.Write(0x00, Donnees[k]);
//  291     for(int V =0 ;V<100;V++);   /* Delai au moins tant que le module du SPI est occupé */   
??EcrireDonnesMCP2515_2:
        MOV     A,R0
        ADD     A,#0x1
        MOV     R0,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     R1,A
??EcrireDonnesMCP2515_3:
        CLR     C
        MOV     A,R0
        SUBB    A,#0x64
        MOV     A,R1
        SUBB    A,#0x0
        MOV     C,0xD0 /* PSW */.2
        XRL     A,PSW
        RLC     A
        JC      ??EcrireDonnesMCP2515_2
        INC     ?V0 + 1
??EcrireDonnesMCP2515_1:
        MOV     A,?V0 + 1
        CLR     C
        SUBB    A,?V0 + 0
        JNC     ??EcrireDonnesMCP2515_4
        ; Setup parameters for call to function CLSPI::Write(UC, UC)
        MOV     ?V0 + 2,?V0 + 1
        MOV     ?V0 + 3,#0x0
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,DPL
        ADD     A,?V0 + 2
        MOV     DPL,A
        MOV     A,DPH
        ADDC    A,?V0 + 3
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R4,A
        MOV     R1,#0x0
        MOV     A,?V0 + 4
        ADD     A,#0x8
        MOV     R2,A
        MOV     A,?V0 + 5
        ADDC    A,#0x0
        MOV     R3,A
        LCALL   ??Write
        MOV     A,R1
        MOV     R0,#0x0
        MOV     R1,#0x0
        SJMP    ??EcrireDonnesMCP2515_3
//  292    }
//  293 
//  294    CS = 1;  
??EcrireDonnesMCP2515_4:
        SETB    0x90.7
//  295 
//  296    return(0x01);
        MOV     R1,#0x1
        MOV     A,#0x3
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 13)
        MOV     R7,#0x6
        LJMP    ?FUNC_LEAVE_XDATA
        CFI EndBlock cfiBlock11
        REQUIRE _A_P1
//  297 }
//  298 
//  299 
//  300 

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  301 unsigned char CLMCP2515 :: LireDonnesMCP2515(unsigned char NombreDonneesEnvoyer, unsigned char Donnee1, unsigned char Donnee2, unsigned char Donnee3)
??LireDonnesMCP2515:
        CFI Block cfiBlock12 Using cfiCommon0
        CFI Function ??LireDonnesMCP2515
        CODE
//  302 {
        FUNCALL ??LireDonnesMCP2515, ??Write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xd
        LCALL   ?FUNC_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 13)
        ; Saved register size: 13
        ; Auto size: 3
        MOV     A,#-0x3
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 16)
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 0,R1
        MOV     A,R4
        MOV     R6,A
        MOV     A,R5
        MOV     R7,A
        MOV     A,#0x10
        LCALL   ?XSTACK_DISP0_8
        MOVX    A,@DPTR
        MOV     R0,A
//  303    UC k;
//  304    UC buf;
//  305    UC Donnees[3] = {0x00};
        MOV     DPTR,#`?<Constant {(UC)'\\000'}>_1`
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOV     A,#0x3
        LCALL   ?MOVE_LONG8_XDATA_XDATA
//  306 
//  307    Donnees[0] = Donnee1;
        MOV     A,R6
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    @DPTR,A
//  308    Donnees[1] = Donnee2;
        MOV     A,R7
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  309    Donnees[2] = Donnee3;
        MOV     A,R0
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
//  310 
//  311    CS = 0;   
        CLR     0x90.7
//  312 
//  313    for(k = 0; k < NombreDonneesEnvoyer; k++)
        MOV     ?V0 + 1,#0x0
        SJMP    ??LireDonnesMCP2515_1
//  314    {
//  315     buf = SPI.Write( 0x00 , Donnees[k]);
//  316     for(int V = 0 ; V < 100; V++);   /* Delai au moins tant que le module du SPI est occupé */   
??LireDonnesMCP2515_2:
        MOV     A,R0
        ADD     A,#0x1
        MOV     R0,A
        MOV     A,R1
        ADDC    A,#0x0
        MOV     R1,A
??LireDonnesMCP2515_3:
        CLR     C
        MOV     A,R0
        SUBB    A,#0x64
        MOV     A,R1
        SUBB    A,#0x0
        MOV     C,0xD0 /* PSW */.2
        XRL     A,PSW
        RLC     A
        JC      ??LireDonnesMCP2515_2
        INC     ?V0 + 1
??LireDonnesMCP2515_1:
        MOV     A,?V0 + 1
        CLR     C
        SUBB    A,?V0 + 0
        JNC     ??LireDonnesMCP2515_4
        ; Setup parameters for call to function CLSPI::Write(UC, UC)
        MOV     ?V0 + 2,?V0 + 1
        MOV     ?V0 + 3,#0x0
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,DPL
        ADD     A,?V0 + 2
        MOV     DPL,A
        MOV     A,DPH
        ADDC    A,?V0 + 3
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R4,A
        MOV     R1,#0x0
        MOV     A,?V0 + 4
        ADD     A,#0x8
        MOV     R2,A
        MOV     A,?V0 + 5
        ADDC    A,#0x0
        MOV     R3,A
        LCALL   ??Write
        MOV     A,R1
        MOV     R2,A
        MOV     R0,#0x0
        MOV     R1,#0x0
        SJMP    ??LireDonnesMCP2515_3
//  317    }
//  318 
//  319    CS = 1;   
??LireDonnesMCP2515_4:
        SETB    0x90.7
//  320 
//  321    return(buf);
        MOV     A,R2
        MOV     R1,A
        MOV     A,#0x3
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 13)
        MOV     R7,#0x6
        LJMP    ?FUNC_LEAVE_XDATA
        CFI EndBlock cfiBlock12
        REQUIRE _A_P1
//  322 }
//  323 
//  324 
//  325 

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  326 void CLMCP2515 :: Delai(unsigned long Temps)
??Delai:
        CFI Block cfiBlock13 Using cfiCommon0
        CFI Function ??Delai
        CODE
//  327 {
        MOV     A,#-0xf
        LCALL   ?FUNC_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 15)
        ; Saved register size: 15
        ; Auto size: 0
        MOV     A,#0xf
        LCALL   ?XSTACK_DISP0_8
        MOV     R0,#?V0 + 0
        LCALL   ?L_MOV_X
//  328  unsigned long k;
//  329  for(k = 0; k < Temps; k++);
        MOV     DPTR,#__Constant_0
        MOV     R0,#?V0 + 4
        LCALL   ?L_MOV_X
        SJMP    ??Delai_1
??Delai_2:
        MOV     DPTR,#__Constant_1
        MOV     R0,#?V0 + 4
        LCALL   ?L_ADD_X
??Delai_1:
        MOV     R0,#?V0 + 0
        MOV     R1,#?V0 + 4
        LCALL   ?UL_GT
        JC      ??Delai_2
//  330 }
        MOV     R7,#0x8
        LJMP    ?FUNC_LEAVE_XDATA
        CFI EndBlock cfiBlock13
//  331 

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  332 unsigned char CLMCP2515 :: Longueur(const  unsigned char * Contenu)
??Longueur:
        CFI Block cfiBlock14 Using cfiCommon0
        CFI Function ??Longueur
        CODE
//  333 {
        MOV     A,#-0x9
        LCALL   ?FUNC_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
//  334 UC Compteur = 0;
        MOV     R1,#0x0
        SJMP    ??Longueur_1
//  335 while(Contenu[Compteur] != '\0')
//  336   {
//  337    Compteur++;
??Longueur_2:
        INC     R1
//  338   }
??Longueur_1:
        MOV     ?V0 + 0,R1
        MOV     ?V0 + 1,#0x0
        MOV     A,R4
        ADD     A,?V0 + 0
        MOV     DPL,A
        MOV     A,R5
        ADDC    A,?V0 + 1
        MOV     DPH,A
        MOVX    A,@DPTR
        JNZ     ??Longueur_2
//  339 return(Compteur);
        MOV     R7,#0x2
        LJMP    ?FUNC_LEAVE_XDATA
        CFI EndBlock cfiBlock14
//  340 }

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA32
__Constant_3e8:
        DS 4
        REQUIRE `?<Initializer for __Constant_3e8>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for __Constant_3e8>`:
        DATA32
        DD 1000

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA32
__Constant_a:
        DS 4
        REQUIRE `?<Initializer for __Constant_a>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for __Constant_a>`:
        DATA32
        DD 10

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA32
__Constant_0:
        DS 4
        REQUIRE `?<Initializer for __Constant_0>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for __Constant_0>`:
        DATA32
        DD 0

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA32
__Constant_1:
        DS 4
        REQUIRE `?<Initializer for __Constant_1>`
        REQUIRE __INIT_XDATA_I

        RSEG XDATA_ID:CODE:NOROOT(0)
`?<Initializer for __Constant_1>`:
        DATA32
        DD 1

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
`?<Constant {(UC)'\\000'}>`:
        DS 3
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
        DATA8
`?<Constant {(UC)'\\000'}>_1`:
        DS 3
        REQUIRE __INIT_XDATA_Z

        END
//  341 
//  342 //LinuxLinuxLinuxLinuxLinuxLinuxLinuxLinuxLinuxLinuxLinuxLinuxLinuxLinuxLinuxTUX
// 
// 1 292 bytes in segment NEAR_CODE
//     1 byte  in segment SFR_AN
//    16 bytes in segment XDATA_I
//    16 bytes in segment XDATA_ID
//     6 bytes in segment XDATA_Z
// 
// 1 292 bytes of CODE  memory (+ 16 bytes shared)
//     0 bytes of DATA  memory (+  1 byte  shared)
//     6 bytes of XDATA memory (+ 16 bytes shared)
//
//Errors: none
//Warnings: 1
