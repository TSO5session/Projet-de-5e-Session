\documentclass[10pt,a4paper,final]{article}

\include{TeX/Packages}   % Packages et dépendances nécessaires

\include{TeX/SourceCode} % Permet de mettre du code source dans le document

\begin{document}
\renewcommand\headrulewidth{0pt}
\fancyfoot[C]{ }






\begin{center}
\includegraphics[scale=1]{Figures/School_Logo.jpg}~\\[1cm]  
\textsc{\LARGE \'{E}lectronique Programmable et Robotique}\\[1.5cm]
\Large 247-6 [1-2-3-4] 7-LI\\[0.5cm]
{ \huge \bfseries Projet de 5$\mathbf{^{e}}$ session \\[0.4cm] }
\HRule \\[1.5cm]





\begin{multicols}{2}
\begin{flushleft}



\textbf{Étudiants:}\\

\bigskip

Vincent Chouinard\\
Hicham Safoine\\
Gabriel Fortin-Bélanger\\ 
Louis-Nomand Ang-Houle\\




\end{flushleft}
\vfill
\begin{flushright}

\textbf{Professeurs:}\\
\medskip
Ali Tadli\\
Alain Champagne\\
Stéphane Deschênes\\
Étienne Tremblay\\



\end{flushright}
\end{multicols}

\bigskip
\bigskip


\includegraphics[scale=0.6]{Figures/Picture_for_Title.jpg} 

\vfill
L'usine à gaz, et le gaz, c'est de l'air!
\bigskip

{\large \today}
\end{center}






\pagebreak
\begin{spacing}{1.13999}
\tableofcontents 
\pagebreak
\listoffigures  
\listoftables 
\end{spacing}  
\pagebreak






\renewcommand\headrulewidth{1pt}
\fancyhead[L]{247-6 [1-2-3-4] 7-LI}
\fancyhead[R]{Projet de 5$\mathbf{^{e}}$ session}

\renewcommand\footrulewidth{1pt}
\fancyfoot[C]{\textbf{page \thepage}}
\fancyfoot[R]{\today}
\fancyfoot[L]{V.C., H.S., G.F-B., L-N.A-H.}
\begin{spacing}{1.5}

\section{Présentation du projet}
Le projet de la cinquième session consiste à réaliser
\begin{itemize}
\item[$\Rightarrow$] Le Bolide
\item[$\Rightarrow$] Carte Dallas DS89C450
\item[$\Rightarrow$] Carte uPSD 3254A
\item[$\Rightarrow$] SOC8200
\item[$\Rightarrow$] Table FESTO
\item[$\Rightarrow$] Carte PIC machin-chose-binouche
\item[$\Rightarrow$] Carte d'extension I{\small 2}C
\item[$\Rightarrow$] Carte d'extension SPI
\item[$\Rightarrow$] Une pile de 10.8 volts
\item[$\Rightarrow$] Quatre moteurs et autant de pneus
\end{itemize}

\subsection{Explication du projet}

\subsection{Schéma bloc vue d'ensemble du système}

\begin{figure}[hbtp]
\caption{Vue d'ensemble du projet}
\centering
\fbox{\includegraphics[scale=0.45]{Figures/SchemaBloc/1.png}}
\end{figure}
\vfill
\pagebreak 

\begin{figure}[hbtp]
\subsubsection{Schéma bloc du bolide}
\caption{Schéma bloc du Bolide}
\centering
\fbox{\includegraphics[scale=0.85]{Figures/SchemaBloc/bolide.png}}
\end{figure}

\vfill
\pagebreak

\subsubsection{Schéma bloc de la table FESTO}

\vfill
\pagebreak

\subsubsection{Schéma bloc du SOC8200}

\vfill
\pagebreak

\subsubsection{Schéma bloc de la station de pesés}

\vfill
\pagebreak

\subsubsection{de la station no.1}

\subsection{Liste des logiciels}
\begin{flushleft}
\HRule
\end{flushleft}
\begin{flushleft}

\begin{multicols}{3}

\textbf{Terminaux}
\begin{itemize}
\item[•]UART Master 0.96
\item[•]Serializ3r 1.0.2
\item[•]TerraTerm
\item[•]Putty
\item[•]GTKterm 0.99.7-rc1
\item[•]xTerminator
\item[•]CAPS
\item[•]tinyBootloader
\end{itemize}

\textbf{Gestion du projet}
\begin{itemize}
\item[•]MS Project 2010
\item[•]Git Hub
\end{itemize}

\textbf{Compilateurs et IDE}
\begin{itemize}
\item[•]Visual Studio 2013
\item[•]Visual Studio 2010
\item[•]IAR 8.20
\item[•]MPLAB version???
\end{itemize}

\textbf{Éditeur de texte}
\begin{itemize}
\item[•]Notepad++
\item[•]gedit
\item[•]medit 1.2.0
\end{itemize}
\textbf{Schémas électriques}

\begin{itemize}
\item[•]OrCAD 16.2
\end{itemize}

\bigskip

\textbf{Système d'exploitation}
\begin{itemize}
\item[•]Windows 7 SP1
\item[•]Windows 8.1
\item[•]Windows XP SP3
\item[•]CentOS
\item[•]Lubuntu 14.10
\end{itemize}

\textbf{Autres}
\begin{itemize}
\item[•]VMWare Workstation 10
\item[•]TeXmaker 4.3
\item[•]Dukto R6
\item[•]Dia
\item[•]Microsoft Visio 2013
\item[•]Festo configuration tool
\item[•]\LaTeX (avec plug-in Doxygen)
\end{itemize}

\end{multicols}
\end{flushleft}
\begin{flushleft}
\HRule
\end{flushleft}

\pagebreak
\subsection{Liste des trames}


\end{spacing}
f
\begin{spacing}{1.5}


\pagebreak

\section{Le matériel}
\subsection{Bloc 1}
D'un pont de vu matériel, le bloc 1 est le plus simple, car il est composé d'un ordinateur Windows munie d'une carte PCI vers CAN et d'une prise RS232 et d'une prise Ethernet. Il n'y a rien à faire, mise à part brancher les bons câbles aux bons endroits. Son rôle est de contrôler et diriger toute l'opération et de veiller au bon fonctionnement de chaque composantes à l'aide d'une application en Csharp. Le bloc 1 est le cerveau de l'usine.

\subsection{Bloc 2}
Le bloc 2 est composé du bolide et de la station no.1. Cette dernière, dont le cerveau est une carte uPSD, joue le rôle de centralisateur CAN. En effet, cette station reçoit des consignes\footnote{Sous forme de trames} en provenance du PC, consignes qu'elle s'empresse d'expédier aux bons endroits via Xbee. De plus, cette station reçoit des information de la station de pesée\footnote{Sous forme de trames CAN}, de la table FESTO\footnote{Via Xbee} et du bolide\footnote{Idem}. Ces informations sont systématiquement retransmises au PC via le bus CAN.

\subsection{Bloc 3}
Le bloc 3 est composé d'une carte PIC et d'une balance. Comme son nom l'indique, la station de pesée pèse le bloc et envoie l'information (le poid) au PC via le bus CAN.

\subsection{Bloc 4}
Le bloc 4 est composé d'un système embarqué Linux basé sur le SOC8200. Son rôle principal est d'agir comme sniffeur d'information et d'afficher sur son écran toutes les données qui transitent sur le bus CAN. Toutefois, ce dernier est en mesure de détecter une défaillance du PC via un gestionnaire de HeartBeat et de prendre la relève en tant que cerveau de l'opération. Le SOC8200 agit comme vice-président du bus CAN.

\subsection{Explication des types de liens}
\subsubsection{RS232}
Un lien RS232 9600 Bauds est établi entre l'ordinateur et le SOC8200. Ce lien sert à l'envoie et à la réception de HeartBeat, afin que le SOC8200 ou l'ordinateur soit informé de toute défaillance de l'autre.

\subsubsection{Xbee}
Lorsque les modules Xbee sont adéquatement configurés, ils font office de remplacement au câble RS232. En effet, nos Xbee discutent entre eux à l'aide du protocole de communication RS232 à 9600 bauds.  

\subsection{Explication des trames}
\subsubsection{RS-232}
Le protocole RS-232 sert à envoyer et à recevoir des HeartBeat. Le PC et le SOC 8200 s'envoient tous deux un HeartBeat par seconde à 9600 bauds. Un HeartBeat, c'est simplement le mot "Allo". Le PC et le SOC2800 "écoutent" les HeartBeats, et si ces derniers ne sont pas entendus, chaque dispositif prend pour acquis que l'autre est hors-service et prend la relève de la gestion du bus CAN.
\pagebreak
\subsubsection{CAN}
Chaque composante matériel, du Bolide au PC, dispose d'un identifiant CAN unique allant de 000 à 005. Chaque fonctionnalité dispose d'un code d'identification suivi de deux octets de données à transmettre.

\begin{table}[!ht]
\caption{Index des identifiants matériel CAN}
\medskip
\centering
\begin{tabular}{|l|c|}
\hline 
\textbf{Device} & \textbf{ID matériel} \\ 
\hline 
Ordinateur & 000 \\ 
\hline 
SOC8200 & 001 \\ 
\hline 
Station 1 & 002 \\ 
\hline 
Station 2  & 003 \\ 
\hline
Station 3  & 004 \\
\hline 
Véhicule  & 005 \\ 
\hline 
\end{tabular} 
\label{tab:testtab1}
\end{table} 


\begin{table}[!ht]
\caption{Index des trames CAN}
\medskip
\centering
\begin{tabular}{|l|c|l|}
\hline 
\textbf{Fonctionnalité} & \textbf{Composante} & \textbf{Données} \\
\hline 
Démarre le véhcule & 0x00 & 0x00 \\ 
\hline 
Arrête le véhicule & 0x00 & 0x01 \\ 
\hline 
Le véhicule est arrêté & 0x01 & 0x00 \\ 
\hline 
Le véhicule est en marche& 0x01 & 0x01 \\ 
\hline 
Le véhicule est hors circuit & 0x01 & 0x02 \\ 
\hline 
Vitesse (0-100) & 0x02 & 0x00 à 0x64 \\ 
\hline 
Battrie & 0x03 & 0x00 à 0x64 \\ 
\hline 
Couleur du bloc & 0x04 & 0x00 à 0x02 \\ 
\hline 
Poids du bloc & 0x05 & 0x00 à 0x64 \\ 
\hline 
Envoyer l'heure & 0x06 & à déterminer \\ 
\hline 
No. de la station & 0x07 & 0x00 à 0x02 \\ 
\hline 
Demande de l'historique & 0xC0 & 0x00 \\ 
\hline 
Direction horaire et antihoraire & 0x08 & 0x00 à 0x01 \\
\hline
\end{tabular} 
\label{tab:testtab1}
\end{table}

\begin{table}[!ht]
\caption{Index des communications CAN}
\medskip
\centering
\begin{tabular}{|l|l|c|l|c|l|c|}
\hline 
\textbf{Émetteur} & \textbf{Action} & \textbf{ID receveur} & \textbf{Donnée envoyée} & \textbf{Récepteur} & \textbf{Erreur}\\ 
\hline 
Ordinateur & Démarrer le véhicule & 004 & 00 00  & Véhicule &  F1\\ 
\hline 
Ordinateur & Arrêter le véhicule & 004 & 00 01  & Véhicule &  F2\\ 
\hline 
Véhicule & Dit: je suis arrêté & 000 & 01 00   & Ordinateur &  F3\\
\hline 
Véhicule & Dit: j'avance & 000 & 01 01  & Ordinateur  &  F4\\  
\hline 
Véhicule & Dit: je suis hors circuit & 000 & 01 02  & Ordinateur &  F5\\ 
\hline 
Véhicule & Dit sa vitesse & 000 & 02 [00 à 64]  & Ordinateur &  F6\\ 
\hline 
Véhicule & Dit le niveau de sa battrie & 000 & 03 [00 à 64]  & Ordinateur &  F7\\ 
\hline 
Station 1 & Dit bloc = métal & 000 & 04 00  & Ordinateur &  F8\\ 
\hline  
Station 1 & Dit bloc = orange & 000 & 04 01  & Ordinateur &  F9\\
\hline 
Station 1 & Dit bloc = noir & 000 & 04 02  & Ordinateur &  FA\\
\hline 
Station 1 & Dit le poids du bloc & 000 & 05 [00 à 64]  & Ordinateur &  FB\\ 
\hline 
Voiture & Dit qu'elle est à la station 1 & 000 & 07 00  & Ordinateur &  FC\\ 
\hline 
Voiture & Dit qu'elle est à la station 2 & 000 & 07 01  & Ordinateur &  FD\\
\hline 
Ordinateur & Envoie l'heure & 003 & 06 à déterminer  & Station 1 &  FE\\ 
\hline 
Ordinateur & Demande le LOG & 001 & C0 00  & SOC8200 & E0\\ 
\hline
Ordinateur & Exige Horaire & 004 & 08 00  & Véhicule & E1\\ 
\hline
Ordinateur & Exige Antihoraire & 004 & 08 01  & Véhicule & E2\\ 
\hline
\end{tabular} 
\label{tab:testtab1}
\end{table}

\pagebreak
\begin{flushleft}
 Exemples de trames CAN à transmettre au PC.
 \end{flushleft} 
\end{spacing}
\begin{lstlisting}
   CAN.SendToPC("0100FF"); // Arrêté
   CAN.SendToPC("0101FF"); // En marche
   CAN.SendToPC("0102FF"); // Hors circuit
   CAN.SendToPC("02xxFF"); // Vitesse de xx
   CAN.SendToPC("03xxFF"); // Battrie chargée à xx %
   CAN.SendToPC("0400FF"); // Bloc métallique
   CAN.SendToPC("0401FF"); // Bloc noire
   CAN.SendToPC("0402FF"); // Bloc orange
   CAN.SendToPC("050064"); // Le bloc est lourd
   CAN.SendToPC("0700FF"); // Rendu à la station 1
   CAN.SendToPC("0701FF"); // Rendu à la station 2
   CAN.SendToPC("0702FF"); // Rendu à la station 3
\end{lstlisting}
\begin{spacing}{1.5}
\pagebreak

\subsubsection{XBEE}
Trois modules Xbee sont présent sur l'ensemble du projet, soit sur la station no.1 (la carte uPSD), sur la station no.2 (la table FESTO) et la station no.4, c'est à dire le bolide. La particularité des Xbee est que lorsqu'ils sont adéquatement configurés, tout ce qu'envoie un Xbee est reçu et lu par tous les autres Xbee à proximité, et c'est pourquoi nous avons définit un système de trames.

Note: mettre image d'un Xbee

\subsection{Liste des pièces}
\begin{center}
\HRule
\end{center}
\begin{multicols}{3}
\begin{itemize}
\item[•]Carte Dallas
\item[•]Carte uPSD
\item[•]SOC 8200 (avec clavier)
\item[•]PIC18FmachinTruc
\item[•]Carte d'extension SPI
\item[•]Carte d'extension I2C
\item[•]Carte CAN MCP2515
\item[•]Xbee
\item[•]Table FESTO
\item[•]Carte d'extension IO
\item[•]Carte connecteur IO
\item[•]Carte connecteur DAC ADC
\item[•]Carte Xbee vers DB9
\item[•]Câble Ethernet croisé
\item[•]Câble Ethernet régulier
\item[•]Câble DB9
\item[•]Carte Xbee vers DB8
\item[•]Le Bolide
\item[•]
\item[•]
\end{itemize}
\end{multicols}
\begin{center}
\HRule
\end{center}

\subsubsection{Liens web}
Mettre ien vers GitHUB
\pagebreak
\subsubsection{Datasheets}
Note: Toutes les datasheets sont en format non-compressé. Vous pouvez zoomer sur le document PDF\footnote{Présenter les datasheets de la sorte économise du papier, donc des arbres, mais requiert de consulter le document .PDF afin de lire adéquatement les datasheets.} afin de lire l'intégralité de leurs premières pages.
\begin{multicols}{3}
74HC14\\
\fbox{\includegraphics[scale=0.2]{Figures/Datasheets/74HC14.pdf}}\\
DAC6574\\
\fbox{\includegraphics[scale=0.2]{Figures/Datasheets/dac6574.pdf}}\\
DS89C450\\
\fbox{\includegraphics[scale=0.2]{Figures/Datasheets/DS89C450.pdf}}\\

\medskip

LineSensors\\
\fbox{\includegraphics[scale=0.2]{Figures/Datasheets/LineSensor.pdf}}\\
LM3914\\
\fbox{\includegraphics[scale=0.2]{Figures/Datasheets/lm3914.pdf}}\\
OPT101\\
\fbox{\includegraphics[scale=0.2]{Figures/Datasheets/opt101.pdf}}\\

\medskip

PCF8573\\
\fbox{\includegraphics[scale=0.2]{Figures/Datasheets/PCF8574.pdf}} \\
uPSD3254A\\
\fbox{\includegraphics[scale=0.2]{Figures/Datasheets/UPSD3254A.pdf}}\\
SaberTooth motor drive\\
\fbox{\includegraphics[scale=0.2]{Figures/Datasheets/Sabertooth.pdf}}\\
\end{multicols}
\vfill
\pagebreak














\section{Interface PC}

\begin{figure}[hbtp]
\caption{Programme de contrôle principal}
\centering
\fbox{\includegraphics[scale=0.7]{Figures/programme.png}}
\end{figure}

Notre programme, écrit en C\# à l'aide de Visual Studio, peut se connecter au bus CAN via une carte SPI\footnote{Spécifier le fabricant} et au bus RS232 via un câble DB9 ou USB\footnote{S'il y a présence d'un FTDI}. La connexion RS232 sert à l'envoi et à la réception du HeartBeat afin d'informer le SOC8200 si l'ordinateur en venait à connaître une défaillance. De plus, des témoins lumineux s'allument en présence de données transmises et reçues. Le programme peut lire l'heure interne du PC et, par un simple clic sur le bouton « Synchroniser », inscrire son heure de référence sur la station no.1 via le bus CAN.\\
\vfill
\pagebreak


\begin{figure}[hbtp]
\caption{Options CAN avancées}
\centering
\fbox{\includegraphics[scale=0.7]{Figures/programme.png}}
\end{figure}
Il est possible d'utiliser des fonctionnalités CAN avancées tels que les masques et filtres de données. De plus, cette fenêtre permet de visualiser les données CAN reçues à l'état brutes et non traitées, ce qui peut s'avérer utile pour du débogage.
\pagebreak

\subsection{Gestion de l'historique}
\begin{figure}[hbtp]
\caption{Historique des actions}
\centering
\fbox{\includegraphics[scale=0.7]{Figures/programme.png}}
\end{figure}
Toute action effectué via le programme ainsi que toute donnée ayant transité sur le bus CAN, RS232 et TCP/IP est catalogué en bonne et due forme dans un historique qu'il est possible de consulter et sauvegarder à tout moment.

\subsubsection{Exemple d'historique typique}
\end{spacing}
\begin{verbatim}
Insérer copié-collé dMhistorique ici
\end{verbatim}
\begin{spacing}{1.5}

\subsection{Structure du programme}
\subsubsection{Les Ghosts Labels}
Un ghost label est un label de texte présent sur l'interface, mais définit comme invisible. Il est doc impossible pour l'usager de le voir et d'y accéder. Leurs principales utilités est de faire office de variable globale afin de passer des paramètres entre fonctions et de déclencher des événements système lorsqu'ils sont lut ou modifié.

\subsection{Explication des trames}

\subsection{Ordre de gestion des tâches}





\pagebreak
\section{Logiciel du SOC8200}
\subsection{Description du programme}
D'un commun accord de l'équipe, le programme du SOC2800 est écrit en script Shell. La principale raison de ce choix est Sourcery Codebench lui-même. La gestion des projets avec Sourcery est un cauchemar, et la nécessité de sauvegarder pour compiler et d'utiliser une machine virtuelle ne viennent qu'agaver la situation. De plus, son gestionnaire de licence\footnote{L'un des membres de l'équipe fait dire que les licences sont une horreur inacceptable sur un système Linux} frustre quiconque souhaite l'utiliser. L'utilisation du script shell est plus simple et permet de faire plus en moins de temps.

\subsection{Schéma bloc du script shell}

\subsection{Gestion des processus et du temps de CPU}

\subsection{Format et récupération des logs}

Toutes les trames CAN reçues sont enregistrées dans le fichier «histocan» dont voici un court apperçu:
\end{spacing}
\begin{verbatim}
  can0    1  [3] 08 00 FF
  can0    4  [3] 04 00 FF
  can0    1  [3] 08 01 FF
  can0    4  [3] 04 00 FF
  can0    1  [3] 08 01 FF
  can0    4  [3] 04 00 FF
  can0    1  [3] 08 01 FF
  can0    4  [3] 04 00 FF
\end{verbatim}

De plus, un autre fichier (histocandate) contient l'heure et la date des trames reçues.
\begin{verbatim}
   Thu Jan  1 00:05:28 UTC 1970
   can0 4 [3] 04 01 FF
   Thu Jan  1 00:06:13 UTC 1970
   can0 4 [3] 04 00 FF
   Thu Jan  1 00:06:16 UTC 1970
   can0 4 [3] 04 02 FF
   Thu Jan  1 00:06:18 UTC 1970
   can0 4 [3] 04 02 FF
   Thu Jan  1 00:06:50 UTC 1970
\end{verbatim} 

\begin{spacing}{1.5}
\subsection{Liste des tests et logiciels}






\pagebreak
\section{Logiciel de la station 1 et du bolide}
Le programme de la station 1 et du bolide est écrit en C++ à l'aide d'IAR WorkBench 8.20 et la compilation conditionnelle offre de le compiler pour chacune des deux stations mentionnées. De plus, la compilation conditionnelle permet au bolide d'utiliser soit une carte d'extension I2C, soit une carte d'extension SPI pour contrôler ses moteurs. et ses divers capteurs.

\subsection{La station no.1}
La station no.1 est composé de uPSD et s'appelle Bloc no.2 dans le cahier de consignes. Cette station reçoit les directives du PC par le BUS CAN et les expédie sur le bus CAN (et vice-versa) aux endroits appropriés. C'est aussi à cette station qu'incombe la tâche de communiquer avec le bolide et la table FESTO via des Xbee

\subsection{La station no.2}
La station no.2 (qui s'appelle Bloc no.3 dans le cahier de consignes) est composé de la table FESTO, de la carte uPSD, de la carte d'extensions IO que nous avons réalisés et d'un Xbee.

\pagebreak
\subsection{Schéma des héritages de classes, table FESTO}
Quelles classes utilisent quelles autres classes dans le code de la table FESTO?
\begin{figure}[hbtp]
\caption{Héritage de la classe CLFesto}
\centering
\fbox{\includegraphics[scale=1]{Figures/DoxyFESTO/clfesto.pdf}}\\
\caption{Héritage de la classe clInOutBase}
\fbox{\includegraphics[scale=0.6]{Figures/DoxyFESTO/clinout.pdf}}\\

\end{figure}
\pagebreak



\subsection{Schéma des héritages de classes, Bolide et Station 1}
Quelles classes utilisent quelles autres classes dans le code du bolide et de la station no. 1?

\begin{figure}[hbtp]
\caption{Héritage de la classe clVéhicule}
\centering
\fbox{\includegraphics[scale=1]{Figures/DoxyBolide/clvehicule.pdf}}
\end{figure}
\begin{figure}[hbtp]
\caption{Héritage de la classe I2C}
\centering
\fbox{\includegraphics[scale=1]{Figures/DoxyBolide/I2C.pdf}}
\end{figure}
\begin{figure}[hbtp]
\caption{Héritage de la classe SPI}
\centering
\fbox{\includegraphics[scale=0.9]{Figures/DoxyBolide/SPI.pdf}}
\end{figure}
\begin{figure}[hbtp]
\caption{Héritage de la classe clInOutBase}
\centering
\fbox{\includegraphics[scale=0.4]{Figures/DoxyBolide/inout.pdf}}
\end{figure}
\vfill
\pagebreak

\begin{figure}[hbtp]
\caption{Héritage de la classe Station1}
\centering
\fbox{\includegraphics[scale=0.7]{Figures/DoxyBolide/Station1.pdf}}
\end{figure}


\subsection{Le bolide}
\begin{table}[!ht]
\centering
\begin{tabular}{|l|c|l|}
\hline 
\textbf{Composante} & \textbf{Adresse I{\small 2}C} & \textbf{Description} \\ 
\hline 
MAX1236 & 0x68 & Convertisseur analogique-numérique \\ 
\hline 
DS1307  & 0xD0 & Circuit d'horloge RTC \\ 
\hline 
PCF8574 & 0x40 & I/O Expender pour bus I{\small 2}C \\ 
\hline 
DAC6574 & 0x98  & Convertisseur numérique-analogique  \\ 
\hline 
OPT101  &  0x50 & Suiveur de ligne  \\ 
\hline 
\end{tabular} 
\caption{Informations sur le bus I{\small 2}C du bolide}
\label{tab:testtab1}
\end{table}

\pagebreak
\subsection{Procédure de compilation sur IAR}
Sur IAR, vous pouvez utiliser le menu déroulant, illustré à la figure suivante, afin de compiler le code pour la carte Dallas ou pour la carte uPSD. 

\begin{figure}[hbtp]
\caption{Choix de la cible sur IAR}
\centering
\fbox{\includegraphics[scale=1]{Figures/Procedure/procedure.png}}
\end{figure}

De plus, des paramètres de compilation optionnelle vous permettent, via la décommentation, de compiler le code pour la carte Dallasou uPSD, pour la carte d'extension I2C ou SPI et pour un capteur de ligne à 3 ou à 5 photoréccepteurs.\\
\end{spacing}
\textbf{Appercu des directives de compilation conditionnelles}
\begin{lstlisting}
   //#define UPSD3254A
   //#define DALLAS89C450
   //#define SPI_DALLAS
   //#define I2C_DALLAS
   //#define PCF_5_CAPTEURS
   //#define PCF_3_CAPTEURS
\end{lstlisting}
\begin{spacing}{1.5}
\subsection{Procédure de vérification}

\pagebreak
\section{Logiciel du module PIC18F258}
\subsection{Description du fonctionnement du programme}

\subsection{Procédure de compilation sur MPLAB}

\subsection{Procédure de vérification}

\pagebreak
\section{Calculs}
\subsection{Calcul du pas de conversion de la pile}
$V_{MAX}=10.8V \Rightarrow MAX1236  = 12 bit \Rightarrow Pas = \dfrac{4K\Omega \cdot \left(\dfrac{10.8V}{10K\Omega}\right)}{2^{12}(pas)} = 1.33(mV/pas)$
\subsection{Calcul du baudrate}
$Baud = \dfrac{2^{SMOD}}{32}\cdot\dfrac{Crystal (Hz)}{12\cdot(256 - TH1)}$\\

%\bigskip

Alors...\\


$\overbrace{9600 = \dfrac{2^{1}}{32} \cdot \dfrac{24\cdot10^{6}(Hz)}{12\cdot(256 - 243)}}^{uPSD 3254} $ $\Leftarrow \& \Rightarrow $ $ \overbrace{9600 = \dfrac{2^{0}}{32}\cdot \dfrac{11.0597 \cdot 10^{6}(Hz)}{12\cdot(256 - 253)}}^{DS89C450}$
\pagebreak

\section{Schémas OrCAD}

\pagebreak6

\section{Fichiers Gerbers}
Une carte d'extension, dont voici les images GERBER\footnote{Les couches présentées no sont pas à l'échelle}, à été réalisée avec OrCAD 16.2 et gravée à l'aide de la rutilante LPKF.

\begin{figure}[hbtp]
\caption{Couche TOP}
\centering
\fbox{\includegraphics[scale=0.47]{Figures/OrCad/top.png}}

\bigskip
\bigskip
\bigskip
\bigskip
\bigskip

\caption{Couche BOT}
\fbox{\includegraphics[scale=0.47]{Figures/OrCad/bot.png}}
\end{figure}

\vfill
\pagebreak

\begin{figure}[hbtp]
\caption{Silk Screen TOP}
\centering
\fbox{\includegraphics[scale=0.47]{Figures/OrCad/sstop.png}}

\bigskip
\bigskip
\bigskip
\bigskip
\bigskip

\caption{Solder mask TOP}
\fbox{\includegraphics[scale=0.47]{Figures/OrCad/smt.png}}
\end{figure}

\vfill
\pagebreak



\begin{figure}[hbtp]
\caption{Drill}
\centering
\fbox{\includegraphics[scale=0.45]{Figures/OrCad/drill.png}}
\caption{Correctif}
\fbox{\includegraphics[scale=0.45]{Figures/OrCad/patch.jpg}}
\end{figure}

Il est à noter que nous avons dû réaliser un correctif lors de la soudure de la carte IO du projet. La zone de ground plane en bleu devait être reliée à GND, c'est-à-dire la zone verte, mais ce n'était pas la cas. C'est pourquoi un bout de fil à été soudé afin de pailler à ce manque. De plus, quelque ponts de soudure ce sont manifestés ça et là, grillant de ce fait nos PCF8574. Rien d'insurmontable.


\pagebreak
\section{Conclusion}

\subsection{Ce que le projet m'a apporté}
\subsubsection{Vincent Chouinard}

\subsubsection{Hicham Safoine}

\subsubsection{Gabriel Fortin-Bélanger}

\subsubsection{Louis-Norman Ang-Houle}



\subsection{Difficultés et corrections}
\subsubsection{Vincent Chouinard}

\subsubsection{Hicham Safoine}

\subsubsection{Gabriel Fortin-Bélanger}

\subsubsection{Louis-Norman Ang-Houle}


\subsection{Ce que j'ai aimé ou pas}
\subsubsection{Vincent Chouinard}

\subsubsection{Hicham Safoine}

\subsubsection{Gabriel Fortin-Bélanger}

\subsubsection{Louis-Norman Ang-Houle}

\end{spacing}
\include{Codesource/cSharp}
\include{Codesource/BolideUpsd}
\include{Codesource/FESTO}
\include{Codesource/PIC}
\include{Codesource/ShellScript}

\textbf{Bonus}\\

\bigskip

\noindent $\mathbf{*54\cdot43.} \vdash:.\alpha,\beta\in1.\supset:\alpha\cap\beta=\Lambda.\equiv.\alpha\cup\beta\in2$\\ 
\indent\emph{Dem.}
\begin{flalign}\nonumber
\vdash .*54\cdot26.\supset\vdash:.\alpha=\iota'x.\beta=\iota'y.\supset:\alpha\cup\beta\in2.&\equiv.x\neq y.\\\nonumber
[*51\cdot 231]\hspace{4.7cm}\hspace{1cm} & \equiv.t'x\cap\iota'y=\Lambda.\\
[*13\cdot 12]\hspace{4.88cm}\hspace{1cm} & \equiv.\alpha\cap\beta=\Lambda \\\nonumber
\vdash.(1).*11\cdot11\cdot35.\supset\hspace{2.88cm}\hspace{1cm}\\
\vdash:.(\exists x,y).\alpha=\iota'x.\beta=\iota'y.\supset:\alpha\cup\beta\in2.&\equiv.\alpha\cap\beta=\Lambda\\\nonumber
\vdash.(2).*11\cdot54.*52\cdot1.\supset\vdash.Prop\hspace{1.09cm}\hspace{1cm}\end{flalign}
\indent From this proposition it will follow, when arithmetical addition has been defined, that $1 + 1 = 2$.


\bigskip


\bigskip


\bigskip


\bigskip

\begin{flushleft}
Cette démonstration mathématique prouve hors de tout doute que $1 + 1 = 2$.\\ Si les mathématiques sont vrais, alors notre projet devrait aller.

\end{flushleft}
\end{document}

