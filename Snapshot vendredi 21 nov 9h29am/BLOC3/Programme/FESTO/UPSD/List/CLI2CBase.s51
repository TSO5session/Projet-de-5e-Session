///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR C/C++ Compiler V8.20.2.41139 for 8051            11/Nov/2014  11:41:09 /
// Copyright 2004-2013 IAR Systems AB.                                        /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  near                                              /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data                                              /
//    Dptr setup         =  1,16                                              /
//                                                                            /
//    Source file        =  C:\Users\1230838\Desktop\PROJETSESSION5\BLOC3\Pro /
//                          gramme\FESTO\Libraire\CLI2CBase.cpp               /
//    Command line       =  C:\Users\1230838\Desktop\PROJETSESSION5\BLOC3\Pro /
//                          gramme\FESTO\Libraire\CLI2CBase.cpp -D UPSD3254A  /
//                          --preprocess=cl C:\Users\1230838\Desktop\PROJETSE /
//                          SSION5\BLOC3\Programme\FESTO\UPSD\List\ -lC       /
//                          C:\Users\1230838\Desktop\PROJETSESSION5\BLOC3\Pro /
//                          gramme\FESTO\UPSD\List\ -lA                       /
//                          C:\Users\1230838\Desktop\PROJETSESSION5\BLOC3\Pro /
//                          gramme\FESTO\UPSD\List\ -o                        /
//                          C:\Users\1230838\Desktop\PROJETSESSION5\BLOC3\Pro /
//                          gramme\FESTO\UPSD\Obj\ -e --no_cse --no_unroll    /
//                          --no_inline --no_code_motion --no_tbaa --debug    /
//                          --core=plain --dptr=16,1 --data_model=large       /
//                          --code_model=near --calling_convention=xdata_reen /
//                          trant --place_constants=data --nr_virtual_regs 8  /
//                          --dlib_config "C:\Program Files\IAR               /
//                          Systems\Embedded Workbench                        /
//                          6.4\8051\LIB\DLIB\dl8051Normal.h" -Ol --eec++     /
//    List file          =  C:\Users\1230838\Desktop\PROJETSESSION5\BLOC3\Pro /
//                          gramme\FESTO\UPSD\List\CLI2CBase.s51              /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME CLI2CBase

        RTMODEL "__SystemLibrary", "DLib"
        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "near"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        ERROR
//NOTE: This module defines or uses C++ features that are not
//      accessible from assembler code. Assembling this file will
//      not produce an equivalent object file to the one produced
//      by the C++ compiler.

        EXTERN ?FUNC_ENTER_XDATA
        EXTERN ?FUNC_LEAVE_XDATA
        EXTERN ?V0

        PUBLIC ??CLI2CBase
        FUNCTION ??CLI2CBase,0203H
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUBLIC `??delete ~CLI2CBase`
        FUNCTION `??delete ~CLI2CBase`,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        PUBLIC `??new CLI2CBase`
        FUNCTION `??new CLI2CBase`,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC ??ucI2CEcrireBit
        FUNCTION ??ucI2CEcrireBit,021203H
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 8, STACK
        PUBLIC ??ucI2CEcrireOctet
        FUNCTION ??ucI2CEcrireOctet,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        PUBLIC ??ucI2CLireBit
        FUNCTION ??ucI2CLireBit,021203H
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 8, STACK
        PUBLIC ??ucI2CLireOctet
        FUNCTION ??ucI2CLireOctet,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        PUBLIC ??vDelais
        FUNCTION ??vDelais,0203H
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUBLIC ??vI2CStart
        FUNCTION ??vI2CStart,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC ??vI2CStop
        FUNCTION ??vI2CStop,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC `?~CLI2CBase`
        FUNCTION `?~CLI2CBase`,0203H
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUBWEAK _A_P1
        
          CFI Names cfiNames0
          CFI StackFrame CFA_SP SP IDATA
          CFI StackFrame CFA_PSP16 PSP16 XDATA
          CFI StackFrame CFA_XSP16 XSP16 XDATA
          CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
          CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
          CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
          CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
          CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
          CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
          CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
          CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
          CFI Resource SP:8, PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
          CFI VirtualResource ?RET:16, ?RET_HIGH:8, ?RET_LOW:8
          CFI ResourceParts PSP16 PSPH, PSPL
          CFI ResourceParts XSP16 XSPH, XSPL
          CFI ResourceParts ?RET ?RET_HIGH, ?RET_LOW
          CFI EndNames cfiNames0
        
          CFI Common cfiCommon0 Using cfiNames0
          CFI CodeAlign 1
          CFI DataAlign -1
          CFI ReturnAddress ?RET CODE
          CFI CFA_DOVERLAY Used
          CFI CFA_IOVERLAY Used
          CFI CFA_SP SP+-2
          CFI CFA_PSP16 PSP16+0
          CFI CFA_XSP16 XSP16+0
          CFI `PSW.CY` SameValue
          CFI `B.BR0` SameValue
          CFI `B.BR1` SameValue
          CFI `B.BR2` SameValue
          CFI `B.BR3` SameValue
          CFI `B.BR4` SameValue
          CFI `B.BR5` SameValue
          CFI `B.BR6` SameValue
          CFI `B.BR7` SameValue
          CFI `VB.BR8` SameValue
          CFI `VB.BR9` SameValue
          CFI `VB.BR10` SameValue
          CFI `VB.BR11` SameValue
          CFI `VB.BR12` SameValue
          CFI `VB.BR13` SameValue
          CFI `VB.BR14` SameValue
          CFI `VB.BR15` SameValue
          CFI VB SameValue
          CFI B Undefined
          CFI A Undefined
          CFI PSW SameValue
          CFI DPL0 SameValue
          CFI DPH0 SameValue
          CFI R0 Undefined
          CFI R1 Undefined
          CFI R2 Undefined
          CFI R3 Undefined
          CFI R4 Undefined
          CFI R5 Undefined
          CFI R6 SameValue
          CFI R7 SameValue
          CFI V0 SameValue
          CFI V1 SameValue
          CFI V2 SameValue
          CFI V3 SameValue
          CFI V4 SameValue
          CFI V5 SameValue
          CFI V6 SameValue
          CFI V7 SameValue
          CFI PSPH Undefined
          CFI PSPL Undefined
          CFI XSPH Undefined
          CFI XSPL Undefined
          CFI ?RET Concat
          CFI ?RET_HIGH Frame(CFA_SP, 2)
          CFI ?RET_LOW Frame(CFA_SP, 1)
          CFI EndCommon cfiCommon0
        
        EXTERN `??operator delete`
        FUNCTION `??operator delete`,010202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN `??operator new`
        FUNCTION `??operator new`,010202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC

// C:\Users\1230838\Desktop\PROJETSESSION5\BLOC3\Programme\FESTO\Libraire\CLI2CBase.cpp
//    1 // ***************** FICHIER:CLI2CBase.cpp
//    2 //
//    3 //  Description:Ce fichier contient la definition des differentes fonction 
//    4 //              I2C de base qui communique avec le materiel
//    5 //
//    6 //  Application realisee avec IAR
//    7 //
//    8 //  AUTEUR : Gabriel Fortin-Belanger
//    9 //  DATE CREATION :    2014-02-07		 VERSION: 1.0
//   10 //  DATE MODIFICATION: ****-**-**
//   11 //
//   12 //******************************************************************************
//   13 #include "CLInOutBase.h"

        ASEGN SFR_AN:DATA:NOROOT,090H
// union <unnamed> volatile __sfr _A_P1
_A_P1:
        DATA8
        DS 1

        RSEG NEAR_CODE:CODE:NOROOT(0)
// __near_func __xdata_reentrant CLI2CBase &CLI2CBase::new CLI2CBase()
`??new CLI2CBase`:
          CFI Block cfiBlock0 Using cfiCommon0
          CFI Function `??new CLI2CBase`
        CODE
        FUNCALL `??new CLI2CBase`, `??operator new`
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL `??new CLI2CBase`, ??CLI2CBase
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    ?V0 + 0
          CFI V0 Frame(CFA_SP, 3)
          CFI CFA_SP SP+-3
        PUSH    ?V0 + 1
          CFI V1 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        ; Saved register size: 2
        ; Auto size: 0
        ; Setup parameters for call to function operator new(unsigned int)
        MOV     R2,#0x1
        MOV     R3,#0x0
        LCALL   `??operator new`
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     R0,?V0 + 0
        MOV     R1,?V0 + 1
        MOV     A,R0
        MOV     R2,A
        MOV     A,R1
        MOV     R3,A
        MOV     A,R0
        ORL     A,R1
        JZ      `??new CLI2CBase_1`
        ; Setup parameters for call to function CLI2CBase::CLI2CBase()
        LCALL   ??CLI2CBase
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        SJMP    `??new CLI2CBase_2`
`??new CLI2CBase_1`:
        MOV     R2,#0x0
        MOV     R3,#0x0
`??new CLI2CBase_2`:
        POP     ?V0 + 1
          CFI V1 SameValue
          CFI CFA_SP SP+-3
        POP     ?V0 + 0
          CFI V0 SameValue
          CFI CFA_SP SP+-2
        RET
          CFI EndBlock cfiBlock0

        RSEG NEAR_CODE:CODE:NOROOT(0)
// __near_func __xdata_reentrant void CLI2CBase::delete ~CLI2CBase(CLI2CBase *)
`??delete ~CLI2CBase`:
          CFI Block cfiBlock1 Using cfiCommon0
          CFI Function `??delete ~CLI2CBase`
        CODE
        FUNCALL `??delete ~CLI2CBase`, `?~CLI2CBase`
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL `??delete ~CLI2CBase`, `??operator delete`
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x8
        LCALL   ?FUNC_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 8)
        ; Saved register size: 8
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
        MOV     A,R6
        ORL     A,R7
        JZ      `??delete ~CLI2CBase_1`
        ; Setup parameters for call to function CLI2CBase::~CLI2CBase()
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   `?~CLI2CBase`
        ; Setup parameters for call to function operator delete(void *)
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   `??operator delete`
`??delete ~CLI2CBase_1`:
        MOV     R7,#0x1
        LJMP    ?FUNC_LEAVE_XDATA
          CFI EndBlock cfiBlock1
//   14 #include "_DeclarationGenerale.h"
//   15 #include "CLI2CBase.h"
//   16 
//   17 #define DELAI 100
//   18 
//   19 
//   20 //***********************CLI2CBase(void)
//   21 //
//   22 //Description:Constructeur par defaut ne fais rien
//   23 //            
//   24 //
//   25 // Nom:CLI2CBase :: CLI2CBase(void)
//   26 //           
//   27 // PARAMETRE D'ENTREE: -
//   28 //                  
//   29 // 
//   30 //
//   31 // PARAMETRE DE SORTIE: -             
//   32 //
//   33 //    
//   34 // Membre utilise: usiAdresseMaison
//   35 //
//   36 //
//   37 // DATE DE CREATION: 10 octobre 2013    AUTEUR: Gabriel Fortin-B
//   38 // DATE DE MODIFICATION:	
//   39 //*****************************************************************************

        RSEG NEAR_CODE:CODE:NOROOT(0)
//   40 CLI2CBase :: CLI2CBase(void)   //Constructeur defaut
??CLI2CBase:
          CFI Block cfiBlock2 Using cfiCommon0
          CFI Function ??CLI2CBase
        CODE
//   41 {
        ; Saved register size: 0
        ; Auto size: 0
//   42   
//   43 }
        RET
          CFI EndBlock cfiBlock2
//   44 
//   45 
//   46 //***********************~CLI2CBase(void)
//   47 //
//   48 //Description:Destructeur par defaut ne fais rien
//   49 //           
//   50 //
//   51 // Nom:CLI2CBase :: ~CLI2CBase(void) 
//   52 //           
//   53 // PARAMETRE D'ENTREE:  -
//   54 //                        
//   55 //                  
//   56 // 
//   57 //
//   58 // PARAMETRE DE SORTIE: -             
//   59 //
//   60 //    
//   61 // Membre utilise: vSetLumiere();
//   62 //
//   63 //
//   64 // DATE DE CREATION: 10 octobre 2013    AUTEUR: Gabriel Fortin-B
//   65 // DATE DE MODIFICATION:	
//   66 //*****************************************************************************

        RSEG NEAR_CODE:CODE:NOROOT(0)
//   67 CLI2CBase :: ~CLI2CBase(void)   
`?~CLI2CBase`:
          CFI Block cfiBlock3 Using cfiCommon0
          CFI Function `?~CLI2CBase`
        CODE
//   68 {
        ; Saved register size: 0
        ; Auto size: 0
//   69  
//   70 }
        RET
          CFI EndBlock cfiBlock3
//   71 
//   72 
//   73 //***********************Fonction:vI2CStart************************************
//   74 //
//   75 // Description:     Cette fonction permet de debuter la communication I2C
//   76 //
//   77 // 
//   78 // Nom:void CLI2CBase :: vI2CStart(void)
//   79 // 
//   80 // PARAMETRE D'ENTREE:Aucun 
//   81 //
//   82 // PARAMETRE DE SORTIE:Aucun              
//   83 //
//   84 // EXEMPLE:
//   85 //
//   86 // PROCEDURES APPELEES: vI2CStart()
//   87 //
//   88 // DATE DE CREATION: 3 septembre 2013    AUTEUR: Gabriel Fortin-B
//   89 // DATE DE MODIFICATION:	
//   90 //*****************************************************************************

        RSEG NEAR_CODE:CODE:NOROOT(0)
//   91 void CLI2CBase :: vI2CStart(void)
??vI2CStart:
          CFI Block cfiBlock4 Using cfiCommon0
          CFI Function ??vI2CStart
        CODE
//   92 {
        FUNCALL ??vI2CStart, ??vDelais
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??vI2CStart, ??vDelais
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??vI2CStart, ??vDelais
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
          CFI DPL0 Frame(CFA_SP, 3)
          CFI CFA_SP SP+-3
        PUSH    DPH
          CFI DPH0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        ; Saved register size: 2
        ; Auto size: 0
        MOV     DPL,R2
        MOV     DPH,R3
//   93   SDA = HIGH; //Place la ligne de donnée a 1
        SETB    0x90.4
//   94   SCL = HIGH; //Place la ligne d'horloge a 1
        SETB    0x90.5
//   95   vDelais();  //Cree un delai pour que les lignes soient stable
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//   96   SDA = LOW;  //Place la ligne de donnée a 0
        CLR     0x90.4
//   97   vDelais();  //Delai pour la stabilité
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//   98   SCL = LOW;  //Ligne d'horloge a 0
        CLR     0x90.5
//   99   vDelais();  //Delai pour la stabilité   
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//  100 }
        POP     DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-3
        POP     DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-2
        RET
          CFI EndBlock cfiBlock4
        REQUIRE _A_P1
//  101 
//  102 
//  103 //***********************Fonction:vI2CStop*************************************
//  104 //
//  105 //Description:Cette fonction permet de faire l<arret d une trame i2c
//  106 //
//  107 // NOM:
//  108 //
//  109 // PARAMETRE D'ENTREE:Aucun 
//  110 //
//  111 // PARAMETRE DE SORTIE:Aucun              
//  112 //
//  113 // EXEMPLE:void CLI2CBase :: vI2CStop(void)
//  114 //
//  115 // PROCEDURES APPELEES: vI2CStop()
//  116 //
//  117 // DATE DE CREATION: 3 septembre 2013    AUTEUR: Gabriel Fortin-B
//  118 // DATE DE MODIFICATION:	
//  119 //***************************************************************************** 

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  120 void CLI2CBase :: vI2CStop(void)
??vI2CStop:
          CFI Block cfiBlock5 Using cfiCommon0
          CFI Function ??vI2CStop
        CODE
//  121 {
        FUNCALL ??vI2CStop, ??vDelais
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??vI2CStop, ??vDelais
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??vI2CStop, ??vDelais
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
          CFI DPL0 Frame(CFA_SP, 3)
          CFI CFA_SP SP+-3
        PUSH    DPH
          CFI DPH0 Frame(CFA_SP, 4)
          CFI CFA_SP SP+-4
        ; Saved register size: 2
        ; Auto size: 0
        MOV     DPL,R2
        MOV     DPH,R3
//  122   SDA = LOW; //Place la ligne de donnée a 0
        CLR     0x90.4
//  123   vDelais(); //Delai pour la stabilité
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//  124   SCL = HIGH;//Ligne d'horloge a 1 pour changer la donnée
        SETB    0x90.5
//  125   vDelais(); //Delai pour la stabilité
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//  126   SDA = HIGH;//Place la ligne de donnée a 1
        SETB    0x90.4
//  127   vDelais();//Delai pour la stabilité
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//  128 }
        POP     DPH
          CFI DPH0 SameValue
          CFI CFA_SP SP+-3
        POP     DPL
          CFI DPL0 SameValue
          CFI CFA_SP SP+-2
        RET
          CFI EndBlock cfiBlock5
        REQUIRE _A_P1
//  129 
//  130 
//  131 
//  132 //***********************Fonction:ucI2CLireOctet*******************************
//  133 //
//  134 //Description:Cette fonction permet de lire un octet sur le bus et de
//  135 //            retourner le ACK
//  136 //
//  137 // NOM:UC CLI2CBase :: ucI2CLireOctet(UC ucAckNoAck)
//  138 // PARAMETRE D'ENTREE:ucAckNoAck: 0 pour ACK et 1 pour NOACK 
//  139 //
//  140 // PARAMETRE DE SORTIE:ucVal: valeur de l'octet                
//  141 //
//  142 // EXEMPLE: ucAckNoAck = 0
//  143 //
//  144 // PROCEDURES APPELEES: ucI2CLireOctet()
//  145 //
//  146 // DATE DE CREATION: 3 septembre 2013    AUTEUR: Gabriel Fortin-B
//  147 // DATE DE MODIFICATION:	
//  148 //*****************************************************************************

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  149 UC CLI2CBase :: ucI2CLireOctet(UC ucAckNoAck)
??ucI2CLireOctet:
          CFI Block cfiBlock6 Using cfiCommon0
          CFI Function ??ucI2CLireOctet
        CODE
//  150 {
        FUNCALL ??ucI2CLireOctet, ??ucI2CLireBit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?FUNC_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
        MOV     DPL,R2
        MOV     DPH,R3
        MOV     ?V0 + 1,R1
//  151   UI i;                          //Declare une variable pour la boucle for
//  152   UC ucVal;                      //Declare une variable pour stocké la donnée
//  153   ucVal = 0x00;                  //Met ucVal o 0
        MOV     ?V0 + 0,#0x0
//  154   for(i = 0; i<8; i++)           //Fait 8 fois pour garder chaque bit
        MOV     R6,#0x0
        MOV     R7,#0x0
        SJMP    ??ucI2CLireOctet_1
//  155    {                             //
//  156                                  //
//  157      if(ucI2CLireBit() == 1)     //Si le bit recu est 1
//  158       {                          //
//  159         ucVal = ucVal << 1;      //Decale a gauche de 1
//  160 	ucVal = ucVal + 1;       //Additionne 1 a la variable ucVal
//  161       }                          //
//  162                                  // 
//  163      else                        //Sinon
//  164       {                          //
//  165         ucVal = ucVal << 1;      //Decale a gauche de 1 pour placer un 0
??ucI2CLireOctet_2:
        MOV     A,?V0 + 0
        CLR     C
        RLC     A
        MOV     ?V0 + 0,A
//  166       }                          //
//  167                                  //
//  168      SDA = ucAckNoAck;	         //Envoie Le signal ACK
??ucI2CLireOctet_3:
        MOV     ?V0 + 2,?V0 + 1
        MOV     A,?V0 + 1
        MOV     C,0xE0 /* A   */.0
        MOV     0x90.4,C
        MOV     A,R6
        ADD     A,#0x1
        MOV     R6,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     R7,A
??ucI2CLireOctet_1:
        CLR     C
        MOV     A,R6
        SUBB    A,#0x8
        MOV     A,R7
        SUBB    A,#0x0
        JNC     ??ucI2CLireOctet_4
        ; Setup parameters for call to function CLI2CBase::ucI2CLireBit()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??ucI2CLireBit
        MOV     A,R1
        XRL     A,#0x1
        JNZ     ??ucI2CLireOctet_2
        MOV     A,?V0 + 0
        CLR     C
        RLC     A
        MOV     ?V0 + 0,A
        INC     ?V0 + 0
        SJMP    ??ucI2CLireOctet_3
//  169    }                             //
//  170                                  //
//  171                                  //
//  172   return(ucVal);                 //
??ucI2CLireOctet_4:
        MOV     R1,?V0 + 0
        MOV     R7,#0x3
        LJMP    ?FUNC_LEAVE_XDATA
          CFI EndBlock cfiBlock6
        REQUIRE _A_P1
//  173   
//  174 }
//  175 
//  176 
//  177 //***********************Fonction:ucI2CEcrireOctet*****************************
//  178 //
//  179 //Description:Cette fonction permet d'Ecrire un octet sur le bus
//  180 //
//  181 // NOM:UC CLI2CBase :: ucI2CEcrireOctet(UC ucValeur)
//  182 // 
//  183 // PARAMETRE D'ENTREE:ucValeur:Valeur a ecrire sur le bus 
//  184 //
//  185 // PARAMETRE DE SORTIE:ucAck: ACK envoyer par le slave 0 pour ACK 1 pour NOACK             
//  186 //
//  187 // EXEMPLE:ucValeur = 0xA0
//  188 //
//  189 // PROCEDURES APPELEES:ucI2CEcrireOctet()
//  190 //
//  191 // DATE DE CREATION: 3 septembre 2013    AUTEUR: Gabriel Fortin-B
//  192 // DATE DE MODIFICATION:	
//  193 //*****************************************************************************

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  194 UC CLI2CBase :: ucI2CEcrireOctet(UC ucValeur)
??ucI2CEcrireOctet:
          CFI Block cfiBlock7 Using cfiCommon0
          CFI Function ??ucI2CEcrireOctet
        CODE
//  195 {
        FUNCALL ??ucI2CEcrireOctet, ??ucI2CEcrireBit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??ucI2CEcrireOctet, ??ucI2CLireBit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??ucI2CEcrireOctet, ??vDelais
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x8
        LCALL   ?FUNC_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 8)
        ; Saved register size: 8
        ; Auto size: 0
        MOV     DPL,R2
        MOV     DPH,R3
        MOV     A,R1
        MOV     R7,A
//  196   UC ucAck;                                 //Declare une variable pour ACK
//  197   UC i;                                     //Declare variable pour le for
//  198   for(i=0;i<8;i++)                          //Faire 8 fois
        MOV     R6,#0x0
        SJMP    ??ucI2CEcrireOctet_1
//  199    {                                        //
//  200      ucI2CEcrireBit((ucValeur & 0x80)>> 7); //Isole le MSB et l'evoie au LSB
??ucI2CEcrireOctet_2:
        ; Setup parameters for call to function CLI2CBase::ucI2CEcrireBit(UC)
        MOV     A,R7
        MOV     C,0xE0 /* A   */.7
        CLR     A
        RLC     A
        MOV     R1,A
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??ucI2CEcrireBit
        MOV     A,R1
//  201      ucValeur = ucValeur << 1;              //Fait un decallage a gauche de 1  
        MOV     A,R7
        CLR     C
        RLC     A
        MOV     R7,A
//  202    }                                        //
        INC     R6
??ucI2CEcrireOctet_1:
        MOV     A,R6
        CLR     C
        SUBB    A,#0x8
        JC      ??ucI2CEcrireOctet_2
//  203 		                            //
//  204   ucAck = ucI2CLireBit();                   //Lit le bus pour saisir le ACK
        ; Setup parameters for call to function CLI2CBase::ucI2CLireBit()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??ucI2CLireBit
        MOV     A,R1
        MOV     R6,A
//  205   vDelais();                                //Delai
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//  206   return(ucAck);                            //retourne la valeur de ACK
        MOV     A,R6
        MOV     R1,A
        MOV     R7,#0x1
        LJMP    ?FUNC_LEAVE_XDATA
          CFI EndBlock cfiBlock7
//  207 
//  208 
//  209 }
//  210 
//  211 //***********************Fonction:ucI2CLireBit*********************************
//  212 //
//  213 //Description:Cette fonction permet de faire un delai
//  214 //
//  215 // NOM:UC CLI2CBase :: ucI2CLireBit(void)
//  216 //
//  217 // 
//  218 // PARAMETRE D'ENTREE:Aucun 
//  219 //
//  220 // PARAMETRE DE SORTIE:ucBit: bit lue sur le port peut etre 1 ou 0              
//  221 //
//  222 // EXEMPLE:
//  223 //
//  224 // PROCEDURES APPELEES: ucI2CLireBit()
//  225 //
//  226 // DATE DE CREATION: 3 septembre 2013    AUTEUR: Gabriel Fortin-B
//  227 // DATE DE MODIFICATION:	
//  228 //*****************************************************************************	

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  229 UC CLI2CBase :: ucI2CLireBit(void)
??ucI2CLireBit:
          CFI Block cfiBlock8 Using cfiCommon0
          CFI Function ??ucI2CLireBit
        CODE
//  230 {
        FUNCALL ??ucI2CLireBit, ??vDelais
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??ucI2CLireBit, ??vDelais
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??ucI2CLireBit, ??vDelais
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??ucI2CLireBit, ??vDelais
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x8
        LCALL   ?FUNC_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 8)
        ; Saved register size: 8
        ; Auto size: 0
        MOV     DPL,R2
        MOV     DPH,R3
//  231   UC ucBit;      //Declare une variable pour stocker le bit lu
//  232 		               // 
//  233   SDA = HIGH;    //Met la ligne de donnée a 1 
        SETB    0x90.4
//  234   vDelais();     //Attend que sa se stabilise
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//  235   SCL =  HIGH;   //L'horloge mis a 1
        SETB    0x90.5
//  236   vDelais();     //Attend que sa se stabilise
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//  237   ucBit = SDA;   //Stocke le bit lu
        MOV     C,0x90.4
        CLR     A
        RLC     A
        MOV     R6,A
//  238   vDelais();     //Attend que sa se stabilise
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//  239   SCL = LOW;     //Horloge mis a 0
        CLR     0x90.5
//  240   vDelais();     //Attend que sa se stabilise
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//  241   return(ucBit); //retourne la valeur du bit lu
        MOV     A,R6
        MOV     R1,A
        MOV     R7,#0x1
        LJMP    ?FUNC_LEAVE_XDATA
          CFI EndBlock cfiBlock8
        REQUIRE _A_P1
//  242 
//  243 }
//  244 
//  245 
//  246 //***********************Fonction:ucI2CEcrireBit*******************************
//  247 //
//  248 //Description:Cette fonction permet d'ecrire un bit sur le bus 
//  249 //
//  250 //
//  251 // NOM:U2C CLICBase :: ucI2CEcrireBit(UC ucValeur)
//  252 // 
//  253 // PARAMETRE D'ENTREE:ucValeur: valeur du bit a envoyer. 0 ou 1.
//  254 //
//  255 // PARAMETRE DE SORTIE:ucValeur: retourne la valeur du bit             
//  256 //
//  257 // EXEMPLE: ucValeur = 0;
//  258 //
//  259 // PROCEDURES APPELEES:ucI2CEcrireBit()
//  260 //
//  261 // DATE DE CREATION: 3 septembre 2013    AUTEUR: Gabriel Fortin-B
//  262 // DATE DE MODIFICATION:	
//  263 //***************************************************************************** 

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  264 UC CLI2CBase :: ucI2CEcrireBit(UC ucValeur)
??ucI2CEcrireBit:
          CFI Block cfiBlock9 Using cfiCommon0
          CFI Function ??ucI2CEcrireBit
        CODE
//  265 {
        FUNCALL ??ucI2CEcrireBit, ??vDelais
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??ucI2CEcrireBit, ??vDelais
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ??ucI2CEcrireBit, ??vDelais
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 8, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 8, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x8
        LCALL   ?FUNC_ENTER_XDATA
          CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
          CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
          CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-3)))
          CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-4)))
          CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-5)))
          CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-6)))
          CFI VB load(1, XDATA, add(CFA_XSP16, literal(-7)))
          CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
          CFI CFA_SP SP+0
          CFI CFA_XSP16 add(XSP16, 8)
        ; Saved register size: 8
        ; Auto size: 0
        MOV     DPL,R2
        MOV     DPH,R3
        MOV     A,R1
        MOV     R6,A
//  266    SDA = ucValeur;         //Envoie un bit sur la ligne de donnee
        MOV     A,R6
        MOV     R7,A
        MOV     A,R6
        MOV     C,0xE0 /* A   */.0
        MOV     0x90.4,C
//  267    vDelais();              //
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//  268    SCL = HIGH;             //Ligne d'horloge a 1
        SETB    0x90.5
//  269    vDelais();              //
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//  270    SCL = LOW;              //Ligne d'horloge a 0
        CLR     0x90.5
//  271    vDelais();              //
        ; Setup parameters for call to function CLI2CBase::vDelais()
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??vDelais
//  272    return(ucValeur);       //Renvoie la valeur du bit
        MOV     A,R6
        MOV     R1,A
        MOV     R7,#0x1
        LJMP    ?FUNC_LEAVE_XDATA
          CFI EndBlock cfiBlock9
        REQUIRE _A_P1
//  273 
//  274 }
//  275 
//  276 
//  277 //***********************Fonction:vDelais**************************************
//  278 //
//  279 //Description:Cette fonction permet de faire un delai
//  280 //
//  281 // NOM: void CLI2CBase ::  vDelais(void)
//  282 //
//  283 // 
//  284 // PARAMETRE D'ENTREE:Aucun 
//  285 //
//  286 // PARAMETRE DE SORTIE:Aucun              
//  287 //
//  288 // EXEMPLE:
//  289 //
//  290 // PROCEDURES APPELEES: vDelai()
//  291 //
//  292 // DATE DE CREATION: 3 septembre 2013    AUTEUR: Gabriel Fortin-B
//  293 // DATE DE MODIFICATION:	
//  294 //*****************************************************************************

        RSEG NEAR_CODE:CODE:NOROOT(0)
//  295 void CLI2CBase ::  vDelais(void)
??vDelais:
          CFI Block cfiBlock10 Using cfiCommon0
          CFI Function ??vDelais
        CODE
//  296 {
        ; Saved register size: 0
        ; Auto size: 0
//  297   UC i;                     //Variable pour la boucle
//  298   for( i=0 ;i < DELAI; i++);//Compte un nombre de fois pour faire un delai 
        MOV     R0,#0x0
        SJMP    ??vDelais_1
??vDelais_2:
        INC     R0
??vDelais_1:
        MOV     A,R0
        CLR     C
        SUBB    A,#0x64
        JC      ??vDelais_2
//  299 
//  300 }
        RET
          CFI EndBlock cfiBlock10

        END
//  301 
//  302 //@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
// 
// 426 bytes in segment NEAR_CODE
//   1 byte  in segment SFR_AN
// 
// 426 bytes of CODE memory
//   0 bytes of DATA memory (+ 1 byte shared)
//
//Errors: none
//Warnings: none
